{"version":3,"sources":["webpack:///webpack/bootstrap d13c081ee8a829c5c8ef","webpack:///./src/index.js","webpack:///./src/Style/index.scss","webpack:///./src/Services/ConfigService.js","webpack:///./src/Services/TimeService.js","webpack:///./src/Services/DebugService.js","webpack:///./src/Services/SessionService.js","webpack:///./src/Models/Entity.js","webpack:///./src/Models/Player.js","webpack:///./src/Models/Company.js","webpack:///./src/Models/Report.js","webpack:///./src/Models/VATRecord.js","webpack:///./src/Models/VATPayment.js","webpack:///./src/Models/FinancialRecord.js","webpack:///./src/Views/Widgets/PlayerInfo.js","webpack:///./src/Views/Widgets/DebugMenu.js","webpack:///./src/Views/Widgets/ProgressBar.js","webpack:///./src/Views/Modals/Modal.js","webpack:///./src/Views/Modals/Message.js","webpack:///./src/Views/Modals/Transfer.js","webpack:///./src/Views/Modals/VATReportingTool.js","webpack:///./src/Views/Drawers/Drawer.js","webpack:///./src/Views/Drawers/Timeline.js","webpack:///./src/Views/Drawers/Stats.js","webpack:///./src/Views/Drawers/Notifications.js","webpack:///./src/Views/Charts/PieChart.js","webpack:///./src/Views/Charts/CoinStack.js","webpack:///./src/Views/Pages/Setup.js","webpack:///./src/Views/Pages/BTaxEstimation.js","webpack:///./src/Views/Pages/Session.js","webpack:///./src/Controllers/ViewController.js"],"names":["require","window","_","Crisp","Elements","Game","MACHINE_PRICE","MACHINE_CAPACITY","PRODUCTION_COST","DEFAULT_UNIT_PRICE","Services","ConfigService","TimeService","DebugService","SessionService","Models","Entity","Player","Company","Report","VATRecord","VATPayment","FinancialRecord","Views","Widgets","PlayerInfo","DebugMenu","ProgressBar","Modals","Modal","Message","Transfer","VATReportingTool","Drawers","Drawer","Timeline","Stats","Notifications","Charts","PieChart","CoinStack","Pages","Setup","BTaxEstimation","Session","Controllers","ViewController","set","key","value","cache","parseFloat","localStorage","setItem","JSON","stringify","e","get","defaultValue","parse","getItem","module","exports","HOURS_PER_SECOND","Date","prototype","reset","setHours","setMinutes","setSeconds","addHours","h","setTime","getTime","addDays","d","setDate","getDate","addMonths","m","setMonth","getMonth","getMonthName","names","getQuarter","month","prettyPrint","string","getFullYear","wait","timeout","Promise","resolve","setTimeout","startClock","startDate","tick","time","currentTime","amount","startTime","unix","currentYear","currentMonth","currentDate","previousQuarter","quarter","currentQuarter","getQuarterFromMonth","autoReloadInterval","setAutoReload","isActive","clearInterval","setInterval","isPaused","reloadStyle","reloadScript","styleTags","document","querySelectorAll","i","length","getAttribute","indexOf","setAttribute","now","scriptTags","clear","location","reload","pause","play","autoProduceUnits","machines","produceUnit","companyAccount","inventory","buyMachine","reportVat","date","tool","reject","on","payBTax","Math","round","Error","getVat","year","vat","isPaid","firstMonth","lastMonth","sales","getSales","cost","getCost","vatSales","vatCost","payVat","setUnitPrice","price","sellUnit","unitPrice","setSales","setCost","result","y","constructor","params","structure","Object","Array","isArray","k","toString","seal","current","personalAccount","company","vatRecord","financialRecord","load","save","reportQuarterlyVAT","report","getQuarterlyReport","productionCost","payments","isReported","payQuarterlyVAT","payment","fine","alert","bankBalance","name","capital","unitProduction","unitProductionCost","demand","num","estimatedYearlySales","estimatedYearlySalesVAT","estimatedYearlyProductionCost","estimatedYearlyProductionCostVAT","estimatedYearlyIncome","estimatedYearlyBTax","estimatedVATPercentage","estimatedYearlyVAT","estimatedMonthlyBTax","player","currentReport","purchaseMachine","parseInt","append","generatePayments","firstYear","firstQuarter","targetYear","targetQuarter","thisFirstQuarter","thisTargetQuarter","dueAt","updateFine","diffDays","ceil","floor","reports","generateReports","targetMonth","thisFirstMonth","thisTargetMonth","View","model","notifications","fetch","_render","getTimeString","timeString","update","playerInfo","isExpanded","toggle","element","querySelector","checked","notify","area","title","description","buttonLabel","onClick","btoa","clearNotification","getNotificationsString","keys","strings","notification","push","join","renderNotifications","ul","class","each","li","h4","if","button","click","hasNotifications","template","div","input","type","renderButton","label","max","message","progressBar","getAll","remove","body","setProgress","progress","dynamicAttributes","dynamicContent","modal","renderHeader","renderBody","renderFooter","close","className","replace","toLowerCase","substring","size","trigger","prerender","min","onChangeAmount","currentTarget","onClickTransfer","h1","renderContent","renderPreview","trim","drawer","renderToggle","getNotification","isSilent","expiresOn","action","onClickNotification","heartbeat","loop","day","do","entry","createdOn","instance","dynamicChildren","percent","isExpired","style","then","parentElement","classList","catch","onClickPayBTax","onClickPayVAT","onClickReportVAT","getCoordinate","x","cos","PI","sin","setTranslation","getMean","numbers","mean","number","lerp","value1","value2","setSlice","duration","slice","color","startPercent","startColor","startValue","svg","renderSlices","delta","labels","renderLabels","requestAnimationFrame","sliceIndex","start","end","largeArc","pathData","path","fill","showPercentage","span","viewBox","currentAmount","coinHeight","transfer","from","to","stackElement","targetAmount","coin","getAmountStyle","_amount","total","updatePieChart","pieChart","onChangeName","onChangeCapital","account","onClickNext","Router","go","placeholder","step","income","btax","onChangeIncome","finalBTax","innerHTML","onClickCalculate","onClickDone","hash","stats","timeline","coinStack","hasFocus","stackAmount","onChangeUnitPrice","onClickBuyMachine","onClickProduce","init","route","index","session"],"mappings":"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","file":"js/app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d13c081ee8a829c5c8ef","'use strict';\n\nrequire('./Style/index.scss');\n\nwindow._ = Crisp.Elements;\n\n// -------------------\n// Constants\n// -------------------\nwindow.Game = {\n    MACHINE_PRICE: 10000,\n    MACHINE_CAPACITY: 1,\n    PRODUCTION_COST: 10,\n    DEFAULT_UNIT_PRICE: 10\n};\n\n// -------------------\n// Services\n// -------------------\nGame.Services = {};\nGame.Services.ConfigService = require('./Services/ConfigService');\nGame.Services.TimeService = require('./Services/TimeService');\nGame.Services.DebugService = require('./Services/DebugService');\nGame.Services.SessionService = require('./Services/SessionService');\n\n// -------------------\n// Models\n// -------------------\nGame.Models = {};\nGame.Models.Entity = require('./Models/Entity');\nGame.Models.Player = require('./Models/Player');\nGame.Models.Company = require('./Models/Company');\nGame.Models.Report = require('./Models/Report');\nGame.Models.VATRecord = require('./Models/VATRecord');\nGame.Models.VATPayment = require('./Models/VATPayment');\nGame.Models.FinancialRecord = require('./Models/FinancialRecord');\n\n// -------------------\n// Views\n// -------------------\nGame.Views = {};\n\nGame.Views.Widgets = {};\nGame.Views.Widgets.PlayerInfo = require('./Views/Widgets/PlayerInfo');\nGame.Views.Widgets.DebugMenu = require('./Views/Widgets/DebugMenu');\nGame.Views.Widgets.ProgressBar = require('./Views/Widgets/ProgressBar');\n\nGame.Views.Modals = {};\nGame.Views.Modals.Modal = require('./Views/Modals/Modal');\nGame.Views.Modals.Message = require('./Views/Modals/Message');\nGame.Views.Modals.Transfer = require('./Views/Modals/Transfer');\nGame.Views.Modals.VATReportingTool = require('./Views/Modals/VATReportingTool');\n\nGame.Views.Drawers = {};\nGame.Views.Drawers.Drawer = require('./Views/Drawers/Drawer');\nGame.Views.Drawers.Timeline = require('./Views/Drawers/Timeline');\nGame.Views.Drawers.Stats = require('./Views/Drawers/Stats');\nGame.Views.Drawers.Notifications = require('./Views/Drawers/Notifications');\n\nGame.Views.Charts = {};\nGame.Views.Charts.PieChart = require('./Views/Charts/PieChart');\nGame.Views.Charts.CoinStack = require('./Views/Charts/CoinStack');\n\nGame.Views.Pages = {};\nGame.Views.Pages.Setup = require('./Views/Pages/Setup');\nGame.Views.Pages.BTaxEstimation = require('./Views/Pages/BTaxEstimation');\nGame.Views.Pages.Session = require('./Views/Pages/Session');\n\n// -------------------\n// Controllers\n// -------------------\nGame.Controllers = {};\nGame.Controllers.ViewController = require('./Controllers/ViewController');\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Style/index.scss\n// module id = 1\n// module chunks = 0","'use strict';\n\n/**\n * The service for user config stored in localStorage\n */\nclass ConfigService {\n    /**\n     * Sets a value\n     *\n     * @param {String} key\n     * @param {Object} value\n     */\n    static set(key, value) {\n        if(!this.cache) { this.cache = {}; }\n\n        if(!!parseFloat(value)) {\n            value = parseFloat(value);\n        }\n\n        try {\n            localStorage.setItem(key, JSON.stringify(value));\n        } catch(e) {\n            localStorage.setItem(key, value);\n        }\n        \n        this.cache[key] = value;\n    }\n\n    /**\n     * Gets a value\n     *\n     * @param {String} key\n     * @param {Object} defaultValue\n     *\n     * @returns {Object} Value\n     */\n    static get(key, defaultValue) {\n        if(!this.cache) { this.cache = {}; }\n\n        if(this.cache[key]) { return this.cache[key]; }\n\n        let value;\n\n        // Parse object\n        try {\n            value = JSON.parse(localStorage.getItem(key)) || defaultValue;\n\n        } catch(e) {\n            value = localStorage.getItem(key) || defaultValue;\n        }\n        \n        // Parse number\n        if(!!parseFloat(value)) {\n            value = parseFloat(value);    \n        }\n\n        this.cache[key] = value;\n\n        return value;\n    }\n}\n\nmodule.exports = ConfigService;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Services/ConfigService.js","'use strict';\n\nconst HOURS_PER_SECOND = 24; \n\n/**\n * Resets hours, minutes and seconds of a date\n */\nDate.prototype.reset = function() {\n    this.setHours(0);\n    this.setMinutes(0);\n    this.setSeconds(0);\n\n    return this;\n};\n\n/**\n * Adds hours to a date\n */\nDate.prototype.addHours = function(h) {    \n    this.setTime(this.getTime() + (h*60*60*1000)); \n    return this;   \n}\n\n/**\n * Adds days to a date\n */\nDate.prototype.addDays = function(d) {\n    this.setDate(this.getDate() + d); \n    return this;   \n}\n\n/**\n * Adds months to a date\n */\nDate.prototype.addMonths = function(m) {\n    this.setMonth(this.getMonth() + m); \n    return this;   \n}\n\n/**\n * Gets the actual month\n */\nDate.prototype.getMonthName = function() {\n    const names = [\n        'January',\n        'Fabruary',\n        'March',\n        'April',\n        'May',\n        'June',\n        'July',\n        'August',\n        'September',\n        'October',\n        'November',\n        'December'\n    ];\n\n    return names[this.getMonth()];\n}\n\n/**\n * Gets quarter from a date\n */\nDate.prototype.getQuarter = function() {\n    let month = this.getMonth() + 1;\n\n    if(month <= 3) { return 1; }\n    if(month <= 6) { return 2; }\n    if(month <= 9) { return 3; }\n    return 4;\n}\n\n/**\n * Pretty prints a date\n */\nDate.prototype.prettyPrint = function() {\n    let string = this.getFullYear() + '-';\n\n    if(this.getMonth() + 1 < 10) {\n        string += '0';\n    }\n\n    string += (this.getMonth() + 1) + '-';\n    \n    if(this.getDate() < 10) {\n        string += '0';\n    }\n\n    string += this.getDate();\n\n    return string;\n}\n\n/**\n * A global helper function for wrapping setTimeout in a promise\n *\n * @param {Number} timeout\n *\n * @returns {Promise} Callback\n */\nwindow.wait = (timeout) => {\n    timeout = timeout || 0;\n    timeout *= 1000;\n\n    return new Promise((resolve) => {\n        setTimeout(() => { resolve(); }, timeout);\n    });\n};\n\n/**\n * The service for managing time\n */\nclass TimeService {\n    /**\n     * Starts the clock\n     */\n    static startClock() {\n        let startDate = new Date();\n        startDate.reset();\n        startDate.setMonth(0);\n        startDate.setDate(1);\n\n        Game.Services.ConfigService.set('time', startDate.getTime());\n        Game.Services.ConfigService.set('startTime', startDate.getTime());\n    }\n\n    /**\n     * Ticks the time\n     */\n    static tick() {\n        let time = this.currentTime;\n\n        time.addHours(HOURS_PER_SECOND);\n\n        Game.Services.ConfigService.set('time', time.getTime());\n    }\n\n    /**\n     * Adds days to the current time\n     *\n     * @param {Number} amount\n     */\n    static addDays(amount) {\n        let time = this.currentTime;\n\n        time.addHours(amount * 24);\n\n        Game.Services.ConfigService.set('time', time.getTime());\n    }\n    \n    /**\n     * Gets the start time\n     */\n    static get startTime() {\n        let unix = Game.Services.ConfigService.get('startTime');\n\n        if(!unix) { return new Date(); }\n\n        return new Date(unix);\n    }\n\n    /**\n     * Gets the current time\n     */\n    static get currentTime() {\n        let unix = Game.Services.ConfigService.get('time');\n\n        if(!unix) { return new Date(); }\n\n        return new Date(unix);\n    }\n    \n    /**\n     * Gets the current year\n     */\n    static get currentYear() {\n        return this.currentTime.getFullYear();\n    }\n    \n    /**\n     * Gets the current month\n     */\n    static get currentMonth() {\n        return this.currentTime.getMonth() + 1;\n    }\n    \n    /**\n     * Gets the current date\n     */\n    static get currentDate() {\n        return this.currentTime.getDate()\n    }\n\n    /**\n     * Gets the previous quarter\n     */\n    static get previousQuarter() {\n        let quarter = this.currentQuarter - 1;\n\n        if(quarter <= 0) {\n            quarter = 4;\n        }\n\n        return quarter;\n    }\n\n    /**\n     * Gets a quarter from a month\n     *\n     * @param {Number} month\n     *\n     * @returns {Number} Quarter\n     */\n    static getQuarterFromMonth(month) {\n        if(month > 9) {\n            return 4;\n        } else if(month > 6) {\n            return 3;\n        } else if(month > 3) {\n            return 2;\n        } else {\n            return 1;\n        }\n    }\n\n    /**\n     * Gets the current quarter\n     */\n    static get currentQuarter() {\n        return this.getQuarterFromMonth(this.currentTime.getMonth() + 1)\n    }\n}\n\nmodule.exports = TimeService;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Services/TimeService.js","'use strict';\n\nlet autoReloadInterval;\n\n/**\n * A service for debugging\n */\nclass DebugService {\n    /**\n     * Sets auto reload on/off\n     *\n     * @param {Boolean} isActive\n     */\n    static setAutoReload(isActive) {\n        if(!isActive && autoReloadInterval) {\n            clearInterval(autoReloadInterval);\n        }\n\n        if(isActive && !autoReloadInterval) {\n            autoReloadInterval = setInterval(() => {\n                if(Game.isPaused) { return; }\n\n                this.reloadStyle();\n                this.reloadScript();\n            }, 500);\n        }\n    }\n\n    /**\n     * Reloads styles\n     */\n    static reloadStyle() {\n        let styleTags = document.querySelectorAll('link');\n\n        if(!styleTags) { return; }\n\n        for(let i = 0; i < styleTags.length; i++) {\n            if(styleTags[i].getAttribute('href').indexOf('css/app.css') === 0) {\n                styleTags[i].setAttribute('href', 'css/app.css?' + Date.now());\n                return;\n            }\n        }\n    }\n\n    /**\n     * Reloads scripts\n     */\n    static reloadScript() {\n        let scriptTags = document.querySelectorAll('script');\n\n        if(!scriptTags) { return; }\n\n        for(let i = 0; i < scriptTags.length; i++) {\n            if(scriptTags[i].getAttribute('src').indexOf('js/app.js') === 0) {\n                scriptTags[i].setAttribute('src', 'js/app.js?' + Date.now());\n                return;\n            }\n        }\n    }\n    \n    /**\n     * Resets the game\n     */\n    static reset() {\n        localStorage.clear();\n        \n        location.reload();\n    }\n\n    /**\n     * Pauses the game\n     */\n    static pause() {\n        Game.isPaused = true; \n    }\n\n    /**\n     * Plays the game\n     */\n    static play() {\n        Game.isPaused = false; \n    }\n}\n\nmodule.exports = DebugService;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Services/DebugService.js","'use strict';\n\n/**\n * A general helper service for common actions\n */\nclass SessionService {\n    /**\n     * Automatically produces units\n     */\n    static autoProduceUnits() {\n        let machines = Game.Services.ConfigService.get('machines', 0);\n\n        if(machines < 1) { return; }\n        \n        for(let i = 0; i < machines; i++) {\n            this.produceUnit();\n        }\n    }\n\n    /**\n     * Produces a unit\n     */\n    static produceUnit() {\n        let companyAccount = Game.Services.ConfigService.get('companyAccount', 0);\n\n        if(companyAccount < Game.PRODUCTION_COST) { return; }\n\n        let inventory = Game.Services.ConfigService.get('inventory', 0);\n\n        Game.Services.ConfigService.set('inventory', inventory + 1);\n        Game.Services.ConfigService.set('companyAccount', companyAccount - Game.PRODUCTION_COST);\n    }\n\n    /**\n     * Buys a machine\n     */\n    static buyMachine() {\n        let companyAccount = Game.Services.ConfigService.get('companyAccount', 0);\n\n        if(companyAccount < Game.MACHINE_PRICE) { return; }\n\n        let machines = Game.Services.ConfigService.get('machines', 0);\n\n        Game.Services.ConfigService.set('machines', machines + 1);\n        Game.Services.ConfigService.set('companyAccount', companyAccount - Game.MACHINE_PRICE);\n    }\n\n    /**\n     * Report VAT\n     *\n     * @param {Date} date\n     *\n     * @return {Promise}\n     */\n    static reportVat(date) {\n        let tool = new Game.Views.Modals.VATReportingTool({ date: date });\n\n        return new Promise((resolve, reject) => {\n            tool.on('done', () => {\n                resolve();\n            });\n\n            tool.on('cancel', () => {\n                reject();\n            });\n        });\n    }\n\n    /**\n     * Pay B tax\n     *\n     * @param {Date} date\n     *\n     * @return {Promise}\n     */\n    static payBTax(date) {\n        let amount = Game.Services.ConfigService.get('btax', 0);\n\n        if(amount > 0) { amount = Math.round(amount/12); }\n        \n        let companyAccount = Game.Services.ConfigService.get('companyAccount', 0);\n\n        if(companyAccount < amount) {\n            return Promise.reject(new Error('You don\\'t have enough money in your company account to pay B tax'));\n        }\n\n        Game.Services.ConfigService.set('companyAccount', companyAccount - amount);\n        \n        return Promise.resolve('B tax for ' + date.getMonthName() + ' ' + date.getFullYear() + ' has been paid');\n    }\n    \n    /**\n     * Gets VAT info\n     *\n     * @param {Number} year\n     * @param {Number} quarter\n     *\n     * @returns {Object} VAT info\n     */\n    static getVat(year, quarter) {\n        let vat = Game.Services.ConfigService.get('vat', {});\n\n        if(!year) { return vat; }\n\n        if(!vat[year]) { vat[year] = {}; }\n\n        if(!quarter) { return vat[year]; }\n\n        if(!vat[year][quarter]) { vat[year][quarter] = { amount: 0, isPaid: false }; }\n\n        let firstMonth = ((quarter - 1) * 3) + 1;\n        let lastMonth = firstMonth + 2;\n\n        for(let month = firstMonth; month <= lastMonth; month++) {\n            let sales = this.getSales(year, month);\n            let cost = this.getCost(year, month);\n\n            let vatSales = (sales / 1.25) * 0.25;\n            let vatCost = (cost / 1.25) * 0.25;\n\n            vat[year][quarter].amount += vatSales + vatCost;\n        }\n\n        return vat[year][quarter];\n    }\n\n    /**\n     * Pay VAT\n     *\n     * @param {Date} date\n     *\n     * @return {Promise}\n     */\n    static payVat(date) {\n        let year = date.getFullYear();\n        let quarter = date.getQuarter();\n\n        let vat = this.getVat(year, quarter);\n\n        if(vat.isPaid) { return; }\n\n        let companyAccount = Game.Services.ConfigService.get('companyAccount', 0);\n\n        if(companyAccount < amount) {\n            return Promise.reject('You don\\'t have enough money in your company account to pay VAT');\n        }\n\n        Game.Services.ConfigService.set('companyAccount', companyAccount - amount);\n\n        return Promise.resolve('VAT for ' + year + ' Q' + quarter + ' has been paid');\n    }\n\n    /**\n     * Sets the unit price\n     *\n     * @param {Number} price \n     */\n    static setUnitPrice(price) {\n        Game.Services.ConfigService.set('unitPrice', price);\n    }\n\n    /**\n     * Sells a unit\n     */\n    static sellUnit() {\n        let inventory = Game.Services.ConfigService.get('inventory', 0);\n\n        if(inventory < 1) { return; }\n        \n        let year = Game.Services.TimeService.currentYear;\n        let month = Game.Services.TimeService.currentMonth;\n       \n        let companyAccount = Game.Services.ConfigService.get('companyAccount', 0);\n        let sales = this.getSales(year, month);\n        let cost = this.getCost(year, month);\n        let unitPrice = Game.Services.ConfigService.get('unitPrice', Game.DEFAULT_UNIT_PRICE);\n\n        sales += unitPrice;\n        cost += Game.PRODUCTION_COST;\n\n        this.setSales(year, month, sales);\n        this.setCost(year, month, cost);\n                \n        Game.Services.ConfigService.set('inventory', inventory - 1);\n        Game.Services.ConfigService.set('companyAccount', companyAccount + unitPrice);\n    }\n\n    /**\n     * Gets the sales numbers\n     *\n     * @param {Number} year\n     * @param {Number} month\n     *\n     * @param {Number} Sales\n     */\n    static getSales(year, month) {\n        let result = 0;\n        let sales = Game.Services.ConfigService.get('sales', {});\n\n        if(year && !sales[year]) { sales[year] = {}; }\n        if(month && !sales[year][month]) { sales[year][month] = 0; }\n    \n        // Specific month\n        if(year && month) {\n            result = sales[year][month];\n\n        // Specific year\n        } else if(month) {\n            for(let m in sales[year]) {\n                result += parseFloat(sales[y][m]) || 0;\n            }\n        \n        // result sales\n        } else {\n            for(let y in sales) {\n                for(let m in sales[y]) {\n                    result += parseFloat(sales[y][m]) || 0;\n                }\n            }\n        }\n\n        return result;\n    }\n    \n    /**\n     * Sets the sales numbers\n     *\n     * @param {Number} year\n     * @param {Number} month\n     * @param {Number} amount\n     */\n    static setSales(year, month, amount) {\n        if(!year) { throw new Error('Year is required'); }\n        if(!month) { throw new Error('Month is required'); }\n\n        let sales = Game.Services.ConfigService.get('sales', {});\n\n        if(!year) { return sales; }\n\n        if(!sales[year]) { sales[year] = {}; }\n\n        if(!month) { return sales[year]; }\n        \n        if(!sales[year][month]) { sales[year][month] = 0; }\n\n        sales[year][month] = amount;\n        \n        Game.Services.ConfigService.set('sales', sales);\n    }\n    \n    /**\n     * Gets the cost numbers\n     *\n     * @param {Number} year\n     * @param {Number} month\n     *\n     * @param {Object|Number} cost\n     */\n    static getCost(year, month) {\n        let result = 0;\n        let cost = Game.Services.ConfigService.get('cost', {});\n\n        if(year && !cost[year]) { cost[year] = {}; }\n        if(month && !cost[year][month]) { cost[year][month] = 0; }\n    \n        // Specific month\n        if(year && month) {\n            result = cost[year][month];\n\n        // Specific year\n        } else if(month) {\n            for(let m in cost[year]) {\n                result += parseFloat(cost[y][m]) || 0;\n            }\n        \n        // result cost\n        } else {\n            for(let y in cost) {\n                for(let m in cost[y]) {\n                    result += parseFloat(cost[y][m]) || 0;\n                }\n            }\n        }\n\n        return result;\n    }\n    \n    /**\n     * Sets the cost numbers\n     *\n     * @param {Number} year\n     * @param {Number} month\n     * @param {Number} amount\n     */\n    static setCost(year, month, amount) {\n        if(!year) { throw new Error('Year is required'); }\n        if(!month) { throw new Error('Month is required'); }\n\n        let cost = Game.Services.ConfigService.get('cost', {});\n\n        if(!year) { return cost; }\n\n        if(!cost[year]) { cost[year] = {}; }\n\n        if(!month) { return cost[year]; }\n        \n        if(!cost[year][month]) { cost[year][month] = 0; }\n\n        cost[year][month] = amount;\n        \n        Game.Services.ConfigService.set('cost', cost);\n    }\n}\n\nmodule.exports = SessionService;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Services/SessionService.js","'use strict';\n\n/**\n * The base model for everything\n */\nclass Entity {\n    /**\n     * Constructor\n     *\n     * @param {Object} params\n     */\n    constructor(params) {\n        this.structure();\n\n        if(params && params instanceof Object && !Array.isArray(params)) {\n            for(let k in params) {\n                switch(typeof this[k]) {\n                    case 'number':\n                        this[k] = parseFloat(params[k] || 0);\n                        break;\n\n                    case 'string':\n                        this[k] = (params[k] || '').toString();\n                        break;\n\n                    default:\n                        this[k] = params[k];\n                        break;\n                }\n            }\n        }\n\n        Object.seal(this);\n    }\n\n    /**\n     * Defines the structure of this model\n     */\n    structure() {}\n}\n\nmodule.exports = Entity;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Models/Entity.js","'use strict';\n\nlet current;\n\n/**\n * The player model\n */\nclass Player extends Game.Models.Entity {\n    /**\n     * Structure\n     */\n    structure() {\n        this.personalAccount = 50000;\n        this.company = new Game.Models.Company();\n        this.vatRecord = new Game.Models.VATRecord();\n        this.financialRecord = new Game.Models.FinancialRecord();  \n    }\n\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.company = new Game.Models.Company(this.company);\n        this.vatRecord = new Game.Models.VATRecord(this.vatRecord);\n        this.financialRecord = new Game.Models.FinancialRecord(this.financialRecord);\n    }\n\n    /**\n     * Loads the player data\n     *\n     * @returns {Player} Player\n     */\n    static load() {\n        return new Player(Game.Services.ConfigService.get('player'));\n    }\n\n    /**\n     * Get the current player\n     */\n    static get current() {\n        if(!current) {\n            current = this.load();\n        }\n\n        return current;\n    }\n\n    /**\n     * Saves the player data\n     */\n    save() {\n        Game.Services.ConfigService.set('player', this);\n    }\n    \n    /**\n     * Reports VAT quarterly\n     *\n     * @param {Number} year\n     * @param {Number} quarter\n     */\n    reportQuarterlyVAT(year, quarter) {\n        let amount = 0;\n\n        let report = this.financialRecord.getQuarterlyReport(year, quarter);     \n\n        amount += report.sales * 0.25; // Sales VAT\n        amount -= report.productionCost / 1.25 * 0.25; // Cost VAT\n\n        this.vatRecord.payments[year][quarter].isReported = true; \n        this.vatRecord.payments[year][quarter].amount = amount;\n    }\n    \n    /**\n     * Pays VAT quarterly\n     *\n     * @param {Number} year\n     * @param {Number} quarter\n     */\n    payQuarterlyVAT(year, quarter) {\n        let payment = this.vatRecord.payments[year][quarter];\n        let amount = payment.amount;\n\n        if(payment.fine > 0) {\n            amount += payment.fine;\n\n            alert('A late fee of ' + payment.fine + ' kr. has been added');\n        }\n\n        this.company.bankBalance -= amount;\n        payment.isPaid = true; \n    }\n}\n\nmodule.exports = Player;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Models/Player.js","'use strict';\n\nconst MACHINE_PRICE = 10000;\n\n/**\n * The main company model\n */\nclass Company extends Game.Models.Entity {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n    }\n\n    /**\n     * Structure\n     */\n    structure() {\n        this.name = 'My Company A/S';\n        this.capital = 20000;\n        this.bankBalance = 0;\n        this.unitPrice = 20;\n        this.unitProduction = 5000;\n        this.unitProductionCost = 10;\n        this.demand = 10000;\n\n        this.inventory = 0;\n        this.machines = 0;\n    }\n\n    /**\n     * Rounds a number by 2 decimal places\n     */\n    round(num) {\n        return Math.round(num * 100) / 100;\n    }\n\n    /**\n     * Gets the estimated yearly sales\n     */\n    get estimatedYearlySales() {\n        return this.round(this.demand * this.unitPrice);\n    }\n    \n    /**\n     * Gets the estimated yearly sales VAT\n     */\n    get estimatedYearlySalesVAT() {\n        return this.round(this.estimatedYearlySales * 0.25);\n    }\n    \n    /**\n     * Gets the estimated yearly cost\n     */\n    get estimatedYearlyProductionCost() {\n        return this.round(this.unitProduction * this.unitProductionCost);\n    }\n    \n    /**\n     * Gets the estimated yearly cost VAT\n     */\n    get estimatedYearlyProductionCostVAT() {\n        return this.round(this.estimatedYearlyProductionCost / 1.25 * 0.25);\n    }\n    \n    /**\n     * Gets the estimated income\n     */\n    get estimatedYearlyIncome() {\n        return this.round(this.estimatedYearlySales - this.estimatedYearlyProductionCost);\n    }\n\n    /**\n     * Gets the estimated yearly B tax\n     */\n    get estimatedYearlyBTax() {\n        return this.round(this.estimatedYearlyIncome * this.estimatedVATPercentage / 100);\n    }\n    \n    /**\n     * Gets the estimated yearly VAT\n     */\n    get estimatedYearlyVAT() {\n        return this.round(this.estimatedYearlySalesVAT - this.estimatedYearlyProductionCostVAT);\n    }\n\n    /**\n     * Gets the estimated monthly B tax\n     */\n    get estimatedMonthlyBTax() {\n        return this.round(this.estimatedYearlyBTax / 12);\n    }\n\n    /**\n     * Gets the estimated VAT percentage\n     */\n    get estimatedVATPercentage() {\n        return 38;\n    }\n    \n    /**\n     * Saves this company\n     */\n    save() {\n        let player = Game.Models.Player.current;\n\n        player.company = this;\n\n        player.save();\n    }\n\n    /**\n     * Sells a unit\n     */\n    sellUnit() {\n        if(this.inventory < 1) { return; }\n        \n        this.inventory--;\n\n        this.bankBalance += this.unitPrice;\n        Game.Models.Player.current.financialRecord.currentReport.sales += this.unitPrice;\n    }\n\n    /**\n     * Produces a unit\n     */\n    produceUnit() {\n        if(this.bankBalance < this.unitProductionCost) {\n            return alert('You do not have enough money to produce more units');\n        }\n\n        this.inventory++;\n\n        this.bankBalance -= this.unitProductionCost;\n        Game.Models.Player.current.financialRecord.currentReport.productionCost += this.unitProductionCost;\n    }\n\n    /**\n     * Purchases a machine\n     */\n    purchaseMachine() {\n        if(this.bankBalance < MACHINE_PRICE) {\n            return alert('You do not have enough money to purchase more machines');\n        }\n\n        this.machines++;\n\n        this.bankBalance -= MACHINE_PRICE;\n        Game.Models.Player.current.financialRecord.currentReport.productionCost += MACHINE_PRICE;\n    }\n}\n\nmodule.exports = Company;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Models/Company.js","'use strict';\n\n/**\n * A monthly report\n */\nclass Report extends Game.Models.Entity {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.sales = parseInt(this.sales);\n        this.productionCost = parseInt(this.productionCost);\n    }\n\n    /**\n     * Structure\n     */\n    structure() {\n        this.sales = 0;\n        this.productionCost = 0;\n    }\n\n    /**\n     * Appends another report to this one\n     *\n     * @param {Report} report\n     */\n    append(report) {\n        this.sales += report.sales;\n        this.productionCost += report.productionCost;\n    }\n}\n\nmodule.exports = Report;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Models/Report.js","'use strict';\n\n/**\n * The record for keeping track of VAT payments\n */\nclass VATRecord extends Game.Models.Entity {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n    }\n\n    /**\n     * Structure\n     */\n    structure() {\n        this.payments = {};\n    }\n\n    /**\n     * Generates all payments\n     */\n    generatePayments() {\n        let startTime = Game.Services.TimeService.startTime;\n        let firstYear = startTime.getFullYear();\n        let firstQuarter = Game.Services.TimeService.getQuarterFromMonth(startTime.getMonth() + 1);\n        let targetYear = Game.Services.TimeService.currentYear;\n        let targetQuarter = Game.Services.TimeService.currentQuarter - 1;\n\n        for(let year = firstYear; year <= targetYear; year++) {\n            if(!this.payments[year]) {\n                this.payments[year] = {};\n            }\n\n            let thisFirstQuarter = 1;\n\n            if(year === firstYear) {\n                thisFirstQuarter = firstQuarter;\n            }\n\n            let thisTargetQuarter = 4;\n\n            if(year === targetYear) {\n                thisTargetQuarter = targetQuarter;\n            }\n\n            for(let quarter = thisFirstQuarter; quarter <= thisTargetQuarter; quarter++) {\n                if((this.payments[year][quarter] || {}) instanceof Game.Models.VATPayment === false) {\n                    this.payments[year][quarter] = new Game.Models.VATPayment(this.payments[year][quarter]);\n                }\n            }\n        }\n\n        return this.payments; \n    }\n}\n\nmodule.exports = VATRecord;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Models/VATRecord.js","'use strict';\n\n/**\n * A class for keeping track of VAT payments\n */\nclass VATPayment extends Game.Models.Entity {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        if(this.dueAt) {\n            this.dueAt = new Date(this.dueAt);\n        } else {\n            this.dueAt = Game.Services.TimeService.currentTime;\n            this.dueAt.setMonth(this.dueAt.getMonth() + 3);\n        }\n    }\n    \n    /**\n     * Structure\n     */\n    structure() {\n        this.isPaid = false;\n        this.isReported = false;\n        this.dueAt = null;\n        this.fine = 0;\n        this.amount = 0;\n    }\n\n    /**\n     * Update fine\n     */\n    updateFine() {\n        if(this.isPaid || !this.dueAt) { return; }\n\n        let diffDays = Math.ceil((Game.Services.TimeService.currentTime.getTime() - this.dueAt.getTime()) / (1000 * 3600 * 24)); \n\n        // 100 kr. per day fine\n        this.fine = Math.floor(diffDays * 100); \n    }\n}\n\nmodule.exports = VATPayment;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Models/VATPayment.js","'use strict';\n\n/**\n * A class for keeping track of reports\n */\nclass FinancialRecord extends Game.Models.Entity {\n    /**\n     * Structure\n     */\n    structure() {\n        this.reports = {};\n    }\n\n    /**\n     * Generate reports\n     */\n    generateReports() {\n        let firstYear = Game.Services.TimeService.startTime.getFullYear();\n        let firstMonth = Game.Services.TimeService.startTime.getMonth() + 1;\n        let targetYear = Game.Services.TimeService.currentYear;\n        let targetMonth = Game.Services.TimeService.currentMonth;\n\n        for(let year = firstYear; year <= targetYear; year++) {\n            if(!this.reports[year]) {\n                this.reports[year] = {};\n            }\n\n            let thisFirstMonth = 1;\n            let thisTargetMonth = 12;\n\n            if(year === firstYear) {\n                thisFirstMonth = firstMonth;\n            }\n\n            if(year === targetYear) {\n                thisTargetMonth = targetMonth;\n            }\n\n            for(let month = thisFirstMonth; month <= thisTargetMonth; month++) {\n                if(!this.reports[year][month]) {\n                    this.reports[year][month] = new Game.Models.Report();\n                }\n            }\n        }\n\n        return this.reports; \n    }\n\n    /**\n     * Gets quarterly report\n     *\n     * @param {Number} year\n     * @param {Number} quarter\n     *\n     * @returns {Object} Quarterly report\n     */\n    getQuarterlyReport(year, quarter) {\n        this.generateReports();\n\n        let firstMonth = quarter * 3 - 2;\n        let targetMonth = firstMonth + 3;\n        \n        let report = new Game.Models.Report();\n\n        for(let month = firstMonth; month < targetMonth; month++) {\n            report.append(this.reports[year][month]);\n        }\n\n        return report; \n    }\n\n    /**\n     * Gets the current report\n     */\n    get currentReport() {\n        this.generateReports();\n\n        return this.reports[Game.Services.TimeService.currentYear][Game.Services.TimeService.currentMonth];\n    }\n\n}\n\nmodule.exports = FinancialRecord;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Models/FinancialRecord.js","'use strict';\n\n/**\n * The persistent player info widget\n */\nclass PlayerInfo extends Crisp.View {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.model = Game.Models.Player.current;\n        \n        this.notifications = {\n            'company': {},\n            'personal-account': {}\n        }\n            \n        this.fetch();\n\n        setInterval(() => {\n            if(Game.isPaused) { return; }\n            \n            this._render();\n        }, 1000);\n    }\n\n    /**\n     * Gets the time string\n     */\n    getTimeString() {\n        let time = Game.Services.TimeService.currentTime;\n        let timeString = time.getFullYear() + '-';\n\n        if(time.getMonth() + 1 < 10) {\n            timeString += '0';\n        }\n\n        timeString += (time.getMonth() + 1) + '-';\n        \n        if(time.getDate() < 10) {\n            timeString += '0';\n        }\n\n        timeString += time.getDate();\n\n        return timeString;\n    }\n\n    /**\n     * Updates this view\n     */\n    static update() {\n        let playerInfo = Crisp.View.get(PlayerInfo);\n\n        if(!playerInfo) { return; }\n\n        playerInfo.fetch();\n    }\n\n    /**\n     * Gets whether or not this view is expanded\n     */\n    get isExpanded() {\n        let toggle = this.element.querySelector('.widget--player-info__toggle');\n\n        if(!toggle) { return false; }\n\n        return toggle.checked;\n    }\n\n    /**\n     * Sets a notification\n     *\n     * @param {String} area\n     * @param {String} title\n     * @param {String} description\n     * @param {String} buttonLabel\n     * @param {Function} onClick\n     */\n    static notify(area, title, description, buttonLabel, onClick) {\n        let playerInfo = Crisp.View.get(PlayerInfo);\n\n        if(!playerInfo) { return; }\n        \n        let key = btoa(title + description);\n\n        playerInfo.notifications[area][key] = {\n            title: title, \n            description: description,\n            buttonLabel: buttonLabel,\n            onClick: onClick\n        };\n    \n        playerInfo._render();\n    }\n\n    /**\n     * Clears a notification\n     *\n     * @param {String} area\n     * @param {String} key\n     */\n    static clearNotification(area, key) {\n        let playerInfo = Crisp.View.get(PlayerInfo);\n\n        if(!playerInfo) { return; }\n        \n        delete playerInfo.notifications[area][key];\n\n        playerInfo._render();\n    }\n\n    /**\n     * Gets a notification string\n     *\n     * @param {String} area\n     *\n     * @returns {String} Notifications\n     */\n    getNotificationsString(area) {\n        if(Object.keys(this.notifications[area]).length < 1) { return ''; }\n\n        let strings = [];\n\n        for(let key in  this.notifications[area]) {\n            let notification = this.notifications[area][key];\n                \n            strings.push(notification.title + '\\n' + notification.description);\n        }\n\n        return strings.join('\\n\\n');\n    }\n    \n    /**\n     * Renders notifications\n     *\n     * @param {String} area\n     *\n     * @returns {HTMLElement} Notifications\n     */\n    renderNotifications(area) {\n        return _.ul({class: 'widget--player-info__area__notifications'},\n            _.each(this.notifications[area], (key, notification) => {\n                return _.li(\n                    _.h4(notification.title),\n                    _.if(notification.description,\n                        notification.description\n                    ),\n                    _.if(notification.onClick,\n                        _.button({class: 'widget widget--button'}, notification.buttonLabel)\n                            .click(() => { notification.onClick(key); })\n                    )\n                );\n            })    \n        );\n    }\n\n    /**\n     * Checks if an area has any notifications\n     *\n     * @param {String} area\n     *\n     * @param {Boolean} Has notifications\n     */\n    hasNotifications(area) {\n        return Object.keys(this.notifications[area]).length > 0;\n    }\n\n    /**\n     * Template\n     */\n    template() {\n        return _.div({class: 'widget widget--player-info'},\n            _.input({type: 'checkbox', class: 'widget widget--player-info__toggle', checked: this.isExpanded}),\n            _.div({class: 'widget--player-info__area company'},\n                _.h4({class: 'widget--player-info__area__heading'}, 'Company'),\n                _.div({class: 'widget--player-info__area__icon' + (this.hasNotifications('company') ? ' notification' : '')}, ''),\n                _.div({class: 'widget--player-info__area__preview'}, this.model.company.name + ': ' + this.model.company.bankBalance + ' kr.'),\n                _.div({class: 'widget--player-info__area__data'},\n                    'Name: ' + this.model.company.name,\n                    '<br>',\n                    'Bank balance: ' + this.model.company.bankBalance + ' kr.',\n                    this.renderNotifications('company')\n                )\n            ),\n            _.div({class: 'widget--player-info__area personal-account'},\n                _.h4({class: 'widget--player-info__area__heading'}, 'Personal account'),\n                _.div({class: 'widget--player-info__area__icon' + (this.hasNotifications('personal-account') ? ' notification' : '')}, ''),\n                _.div({class: 'widget--player-info__area__preview'}, this.model.personalAccount + ' kr.'),\n                _.div({class: 'widget--player-info__area__data'},\n                    'Balance: ' + this.model.personalAccount + ' kr.',\n                    this.renderNotifications('personal-account')\n                )\n            )\n        );\n    }\n}\n\nmodule.exports = PlayerInfo;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Widgets/PlayerInfo.js","'use strict';\n\nclass DebugMenu extends Crisp.View {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n\n    /**\n     * Renders a button\n     *\n     * @param {String} label\n     * @param {Function} onClick\n     */\n    renderButton(label, onClick) {\n        return _.button({class: 'widget widget--button widget--debug-menu__button'}, label)\n            .click(() => { onClick(); });\n    }\n\n    /**\n     * Template\n     */\n    template() {\n        return _.div({class: 'widget widget--debug-menu'},\n            _.input({type: 'checkbox', class: 'widget--debug-menu__toggle'}),\n            this.renderButton('Reset', Game.Services.DebugService.reset),\n            this.renderButton('Pause', Game.Services.DebugService.pause),\n            this.renderButton('Play', Game.Services.DebugService.play),\n            this.renderButton('Skip 30 days', () => { Game.Services.TimeService.addDays(30); })\n        );\n    }\n}\n\nmodule.exports = DebugMenu;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Widgets/DebugMenu.js","'use strict';\n\n/**\n * A progress bar\n */\nclass ProgressBar extends Crisp.View {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.max = this.max || 100;\n        this.value = this.value || 0;\n        this.message = '';\n\n        this.fetch();\n\n        for(let progressBar of Crisp.View.getAll(ProgressBar)) {\n            if(progressBar !== this) {\n                progressBar.remove();\n            }\n        }\n\n        _.append(document.body, this.element);\n    }\n\n    /**\n     * Sets the progress\n     *\n     * @param {Number} value\n     * @param {Number} max\n     * @param {String} message\n     */\n    setProgress(value, max, message) {\n        this.value = value;\n        this.max = max;\n        this.message = message;\n\n        this.update();\n    }\n\n    /**\n     * Template\n     */\n    template() {\n        return _.div({class: 'widget widget--progress-bar'},\n            _.progress({dynamicAttributes: true, class: 'widget--progress-bar__progress', value: this.value, max: this.max}),\n            _.div({dynamicContent: true, class: 'widget--progress-bar__message'}, this.message)\n        );\n    }\n}\n\nmodule.exports = ProgressBar;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Widgets/ProgressBar.js","'use strict';\n\n/**\n * A modal\n */\nclass Modal extends Crisp.View {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n\n        for(let modal of Crisp.View.getAll(Modal)) {\n            if(modal === this) { continue; }\n            \n            modal.remove();\n        }\n\n        _.append(document.body, this);\n\n        Game.Services.TimeService.isPaused = true;\n    }\n\n    /**\n     * Renders the header\n     */\n    renderHeader() {}\n\n    /**\n     * Renders the body\n     */\n    renderBody() {}\n\n    /**\n     * Renders the footer\n     */\n    renderFooter() {}\n\n    /**\n     * Closes this modal\n     */\n    close() {\n        this.remove();\n\n        Game.Services.TimeService.isPaused = false;\n    }\n\n    /**\n     * Gets the class name\n     */\n    get className() {\n        return this.name.replace(/([A-Z])/g, '-$1').toLowerCase().substring(1);\n    }\n\n    /**\n     * Template\n     */\n    template() {\n        return _.div({class: 'modal modal--' + this.className + ' ' + (this.size || 'large')},\n            _.div({class: 'modal__dialog'},\n                _.button({class: 'modal__close widget widget--button'})\n                    .click(() => {\n                        this.close();\n\n                        this.trigger('cancel');\n                    }),\n                _.div({class: 'modal__header'},\n                    this.renderHeader()\n                ),\n                _.div({class: 'modal__body'},\n                    this.renderBody(),\n                ),\n                _.div({class: 'modal__footer'},\n                    this.renderFooter()  \n                )\n            )\n        );\n    }\n}\n\nmodule.exports = Modal;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Modals/Modal.js","'use strict';\n\n/**\n * A message modal\n */\nclass Message extends Game.Views.Modals.Modal {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n    }\n\n    /**\n     * Pre render\n     */\n    prerender() {\n        this.size = this.size || 'small';\n    }\n\n    /**\n     * Renders the header\n     */\n    renderHeader() {\n        return _.div({class: 'modal--message__title'}, this.title);\n    }\n    \n    /**\n     * Renders the body\n     */\n    renderBody() {\n        return _.div({class: 'modal--message__message'}, this.message);\n    }\n\n    /**\n     * Renders the footer\n     */\n    renderFooter() {\n        return _.button({class: 'widget widget--button align-right'}, 'OK')\n            .click(() => { this.close(); })\n    }\n}\n\nmodule.exports = Message;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Modals/Message.js","'use strict';\n\n/**\n * A modal for transffering funds\n */\nclass Transfer extends Game.Views.Modals.Modal {\n    /**\n     * Pre render\n     */\n    prerender() {\n        this.size = this.size || 'small';\n        this.amount = 0;\n    }   \n\n    /**\n     * Render header\n     */\n    renderHeader() {\n        return 'Transfer funds';\n    }\n\n    /**\n     * Render body\n     */\n    renderBody() {\n        let companyAccount = Game.Services.ConfigService.get('companyAccount', 0);\n\n        return _.div({class: 'widget-group'},\n            _.div({class: 'widget widget--label text-center'}, 0),\n            _.input({class: 'widget widget--range', type: 'range', min: 0, max: companyAccount})\n                .on('input', (e) => { this.onChangeAmount(e.currentTarget.value); }),\n            _.div({class: 'widget widget--label text-center'}, companyAccount)\n        );\n    }\n\n    /**\n     * Event: Change amount\n     *\n     * @param {Number} amount\n     */\n    onChangeAmount(amount) {\n        this.amount = parseFloat(amount);\n\n        this.update();\n    }\n\n    /**\n     * Event: Click transfer\n     */\n    onClickTransfer() {\n        let companyAccount = Game.Services.ConfigService.get('companyAccount', 0);\n        let personalAccount = Game.Services.ConfigService.get('personalAccount', 0);\n\n        if(companyAccount < this.amount) { return; }\n\n        Game.Services.ConfigService.set('companyAccount', companyAccount - this.amount);\n        Game.Services.ConfigService.set('personalAccount', personalAccount + this.amount);\n\n        this.trigger('submit');\n\n        this.close();\n    }\n\n    /**\n     * Render footer\n     */\n    renderFooter() {\n        return _.button({dynamicContent: true, class: 'widget widget--button align-right'}, 'Transfer ' + this.amount + ' DKK')\n            .click(() => { this.onClickTransfer(); });\n    }\n}\n\nmodule.exports = Transfer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Modals/Transfer.js","'use strict';\n\n/**\n * The VAT reporting tool\n */\nclass VATReportingTool extends Game.Views.Modals.Modal {\n    /**\n     * Gets the class name\n     */\n    get className() {\n        return 'vat-reporting-tool';\n    }\n\n    /**\n     * Gets the model\n     */\n    get model() {\n        return Game.Models.Player.current.vatRecord.payments[this.year][this.quarter];\n    }\n\n    /**\n     * Gets the quarterly report\n     */\n    getQuarterlyReport() {\n        return Game.Models.Player.current.financialRecord.getQuarterlyReport(this.year, this.quarter);\n    }\n\n    /**\n     * Renders the header\n     */\n    renderHeader() {\n        return _.h1('Report VAT for ' + this.year + ' Q' + this.quarter);\n    }\n\n    /**\n     * Renders the body\n     */\n    renderBody() {\n        return _.div({class: this.className + '__calculation'},\n             \n        );\n    }\n}\n\nmodule.exports = VATReportingTool;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Modals/VATReportingTool.js","'use strict';\n\n/**\n * A drawer for information that should be tucked away\n */\nclass Drawer extends Crisp.View {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.model = this.model || {};\n\n        this.fetch();\n    }\n    \n    /**\n     * Gets whether or not this view is expanded\n     */\n    get isExpanded() {\n        let toggle = this.element.querySelector('.drawer__toggle');\n\n        if(!toggle) { return false; }\n\n        return toggle.checked;\n    }\n\n    /**\n     * Renders the content of the drawer\n     */\n    renderContent() {}\n    \n    /**\n     * Renders the preview of the drawer\n     */\n    renderPreview() {\n        return _.div({class: 'drawer__preview'},\n            _.label({class: 'drawer__preview__label'},\n                this.name\n                    .replace('Drawer', '')\n                    .replace(/([A-Z])/g, ' $1')\n                    .trim()\n            )\n        );\n    }\n\n    /**\n     * Updates this drawer (static)\n     */\n    static update() {\n        let drawer = Crisp.View.get(this);\n\n        if(!drawer) { return; }\n\n        drawer.update();\n    }\n\n    /**\n     * Renders the toggle\n     */\n    renderToggle() {\n        return _.input({type: 'checkbox', class: 'drawer__toggle', checked: this.isExpanded});\n    }\n\n    /**\n     * Template\n     */\n    template() {\n        return _.div({class: 'drawer drawer-' + this.name.replace('Drawer', '').replace(/([A-Z])/g, '-$1').trim().toLowerCase()},\n            this.renderToggle(),\n            this.renderPreview(),\n            this.renderContent()\n        );\n    }\n}\n\nmodule.exports = Drawer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Drawers/Drawer.js","'use strict'\n\n/**\n * The pervasive timeline\n */\nclass Timeline extends Game.Views.Drawers.Drawer {\n    /**\n     * Gets the notification for a date\n     *\n     * @param {Date} date\n     *\n     * @returns {Object} Notification\n     */\n    getNotification(date) {\n        // Pay VAT due date\n        if(\n            date.getDate() === 1 && // The first day of...\n            (\n                date.getMonth() === 2 || // ...march or...\n                date.getMonth() === 5 || // ...june or...\n                date.getMonth() === 8 || // ...september or...\n                date.getMonth() === 11   // ...december\n            )\n        ) {\n            return {\n                type: 'alert',\n                title: 'VAT due',\n                isSilent: true\n            };\n        }\n        \n        // Able to pay VAT\n        if(\n            date.getDate() === 24 && // The 24th day of...\n            (\n                date.getMonth() === 1 || // ...february or...\n                date.getMonth() === 4 || // ...may or...\n                date.getMonth() === 7 || // ...august or...\n                date.getMonth() === 10   // ...november\n            )\n        ) {\n            let expiresOn = new Date(date).addMonths(1);\n            expiresOn.setDate(1); \n\n            return {\n                type: 'warning',\n                title: 'Pay VAT',\n                message: 'VAT payment can be made, and is due on ' + expiresOn.prettyPrint(),\n                expiresOn: expiresOn,\n                action: {\n                    label: 'Pay VAT (' + Game.Services.SessionService.getVat(date.getFullYear(), date.getQuarter()).amount + ' DKK)',\n                    onClick: 'onClickPayVAT'\n                }\n            };\n        }\n\n        // Report VAT\n        if(\n            date.getDate() === 4 && // The first day of...\n            (\n                date.getMonth() === 0 || // ...january or...\n                date.getMonth() === 3 || // ...april or...\n                date.getMonth() === 6 || // ...july or...\n                date.getMonth() === 9    // ...october\n            )\n        ) {\n            let expiresOn = new Date(date).addMonths(1); \n            expiresOn.setDate(24);\n\n            return {\n                type: 'warning',\n                title: 'Report VAT',\n                message: 'VAT can be reported, and payment can be made starting ' + expiresOn.prettyPrint(),\n                expiresOn: expiresOn,\n                action: {\n                    label: 'Report VAT',\n                    onClick: 'onClickReportVAT'\n                }\n            };\n        }\n\n        // Able to pay B tax\n        if(date.getDate() === 1) {\n            let expiresOn = new Date(date);\n            expiresOn.setDate(22);\n            \n            return {\n                type: 'warning',\n                title: 'Pay B tax',\n                message: 'B tax payment can be made, and is due on ' + expiresOn.prettyPrint(),\n                expiresOn: expiresOn,\n                action: {\n                    label: 'Pay B tax (' + Math.round(Game.Services.ConfigService.get('btax', 0) / 12) + ' DKK)',\n                    onClick: 'onClickPayBTax'\n                }\n            };\n        }\n        \n        // B tax payment due\n        if(date.getDate() === 22) {\n            return {\n                type: 'alert',\n                title: 'B tax due',\n                isSilent: true\n            };\n        }\n    }\n\n    /**\n     * Event: Click notification\n     *\n     * @param {Object} notification\n     */\n    onClickNotification(notification) {\n        alert(notification.message);\n    }\n\n    /**\n     * Heartbeat\n     */\n    heartbeat() {\n        this.update();\n    }\n\n    /**\n     * Renders the toggle\n     */\n    renderToggle() {\n        return null;\n    }\n\n    /**\n     * Renders the preview\n     */\n    renderPreview() {\n        let date = Game.Services.TimeService.currentTime;\n\n        return _.div({dynamicContent: true, class: 'drawer__preview drawer--timeline__scroller'},\n            _.div({class: 'drawer--timeline__scroller__year'},\n                date.getFullYear()\n            ),\n            _.div({class: 'drawer--timeline__scroller__month'},\n                date.getMonthName()\n            ),\n            _.div({class: 'drawer--timeline__scroller__days'},\n                _.loop(30, (day) => {\n                    let currentDate = new Date(date);\n\n                    currentDate.addDays(day);\n                    currentDate.reset();\n\n                    let notification = this.getNotification(currentDate);\n                   \n                    if(notification && day === 0 && !notification.isSilent) {\n                        Game.Views.Drawers.Notifications.set(notification);\n                    }\n\n                    return _.div({class: 'drawer--timeline__scroller__day ' + (currentDate.getDate() % 2 === 0 ? 'even' : 'odd')},\n                        _.if(currentDate.getDate() === 1 && day > 0,\n                            _.div({class: 'drawer--timeline__scroller__day__month'}, currentDate.getMonthName())\n                        ),\n                        _.div({class: 'drawer--timeline__scroller__day__number', 'data-number': currentDate.getDate()},\n                            currentDate.getDate(),\n                        ),\n                        _.do(() => { \n                            if(!notification) { return; }\n\n                            return _.div({class: 'drawer--timeline__scroller__day__notification ' + (notification.type || '')}, notification.title);\n                        })\n                    );\n                })\n            )\n        );\n    }\n\n    /**\n     * Renders the main content\n     */\n    renderContent() {\n        return _.div({class: 'drawer__content drawer--timeline__days'},\n\n        );\n    }\n}\n\nmodule.exports = Timeline;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Drawers/Timeline.js","'use strict';\n\n/**\n * Player statistics\n */\nclass Stats extends Game.Views.Drawers.Drawer {\n    /**\n     * Renders the toggle\n     */\n    renderToggle() {\n        return null;\n    }\n\n    /**\n     * Heartbeat\n     */\n    heartbeat() {\n        this.update();\n    }\n\n    /**\n     * Renders the preview\n     */\n    renderPreview() {\n        return _.div({class: 'drawer__preview drawer--stats__preview'},\n            _.div({class: 'drawer--stats__preview__company'},\n                _.div({dynamicContent: true, class: 'widget widget--label text-center'}, 'Company account: ' + Game.Services.ConfigService.get('companyAccount', 0) + ' DKK')\n            ),\n            _.div({class: 'drawer--stats__preview__transactions'},\n                _.button({class: 'widget widget--button align-center'}, 'Transfer ')\n                    .click(() => {\n                        new Game.Views.Modals.Transfer();\n                    })\n            ),\n            _.div({class: 'drawer--stats__preview__personal'},\n                _.div({dynamicContent: true, class: 'widget widget--label text-center'}, 'Personal account: ' + Game.Services.ConfigService.get('personalAccount', 0) + ' DKK')\n            )\n        );\n    }\n}\n\nmodule.exports = Stats;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Drawers/Stats.js","'use strict';\n\n/**\n * Notification drawer\n */\nclass Notifications extends Game.Views.Drawers.Drawer {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.model = Game.Services.ConfigService.get('notifications') || {};\n\n        for(let key in this.model) {\n            let entry = this.model[key];\n\n            if(entry.createdOn) {\n                entry.createdOn = new Date(entry.createdOn);\n            }\n            \n            if(entry.expiresOn) {\n                entry.expiresOn = new Date(entry.expiresOn);\n            }\n        }\n\n        this.fetch();\n    }\n\n    /**\n     * Sets a notification\n     *\n     * @param {Object} notification\n     */\n    static set(notification) {\n        let instance = Crisp.View.get(Notifications);\n\n        if(!instance) { return; }\n\n        notification.createdOn = Game.Services.TimeService.currentTime;\n\n        let key = notification.createdOn.getTime().toString();\n\n        instance.model[key] = notification;\n\n        instance.save();\n\n        instance.fetch();\n    }\n\n    /**\n     * Save changes\n     */\n    save() {\n        Game.Services.ConfigService.set('notifications', this.model);\n    }\n\n    /**\n     * Heartbeat\n     */\n    heartbeat() {\n        this.update();\n    }\n\n    /**\n     * Renders the preview\n     */\n    renderPreview() {\n        let currentDate = Game.Services.TimeService.currentTime;\n\n        return _.div({dynamicChildren: true, class: 'drawer__preview drawer--notifications__entries'},\n            _.each(this.model, (key, notification) => {\n                return _.div({class: 'drawer--notifications__entry'},\n                    _.do(() => {\n                        if(!notification.expiresOn) { return; }\n\n                        let percent = ((currentDate.getTime() - notification.createdOn.getTime()) / (notification.expiresOn.getTime() - notification.createdOn.getTime())) * 100;\n\n                        if(percent >= 100) {\n                            notification.isExpired = true;\n                            percent = 100;\n                        }\n\n                        return _.div({dynamicAttributes: true, class: 'drawer--notifications__entry__progress', style: 'width: ' + percent + '%'});\n                    }),\n                    _.if(notification.title,\n                        _.div({class: 'drawer--notifications__entry__title'}, notification.title)\n                    ),\n                    _.if(notification.message,\n                        _.div({class: 'drawer--notifications__entry__message'}, notification.message)\n                    ),\n                    _.do(() => {\n                        if(!notification.action) { return; }\n\n                        return _.button({dynamicAttributes: true, class: 'drawer--notifications__entry__action widget widget--button ' + (notification.isExpired ? 'alert' : notification.type || '')}, notification.action.label)\n                            .click((e) => { \n                                if(typeof this[notification.action.onClick] !== 'function') { return; }\n\n                                this[notification.action.onClick](notification)\n                                .then((message) => {\n                                    e.currentTarget.parentElement.classList.toggle('out', true);\n                                   \n                                    setTimeout(() => {\n                                        delete this.model[key];\n                                        this.save();\n                                    }, 500);\n\n                                    if(message) {\n                                        new Game.Views.Modals.Message({\n                                            title: 'Success',\n                                            message: message\n                                        });\n                                    }\n                                })\n                                .catch((e) => {\n                                    new Game.Views.Modals.Message({\n                                        title: 'Error',\n                                        message: e.message\n                                    });\n                                });\n                            })\n                    })\n                );\n            })\n        );\n    }\n\n    /**\n     * Renders the toggle\n     */\n    renderToggle() {\n        return null;\n    }\n\n    /**\n     * Event: Click pay B tax\n     *\n     * @param {Object} notification\n     */\n    onClickPayBTax(notification) {\n        return Game.Services.SessionService.payBTax(notification.createdOn);\n    }\n    \n    /**\n     * Event: Click pay VAT\n     *\n     * @param {Object} notification\n     */\n    onClickPayVAT(notification) {\n        return Game.Services.SessionService.payVat(notification.createdOn);\n    }\n   \n    /**\n     * Event: Click report VAT\n     *\n     * @param {Object} notification\n     */\n    onClickReportVAT(notification) {\n        return Game.Services.SessionService.reportVat(notification.createdOn);\n    }\n}\n\nmodule.exports = Notifications;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Drawers/Notifications.js","'use strict';\n\n/**\n * A flexible pie chart\n */\nclass PieChart extends Crisp.View {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.model = this.model || {};\n\n        this.fetch();\n    }\n\n    /**\n     * Gets a coordinate based on percent\n     *\n     * @param {Number} percent\n     *\n     * @param {Object} Coordinate\n     */\n    getCoordinate(percent) {\n        return {\n            x: Math.cos(2 * Math.PI * percent),\n            y: Math.sin(2 * Math.PI * percent)\n        };\n    }\n\n    /**\n     * Sets translation\n     *\n     * @param {Number} x\n     * @param {Number} y\n     */\n    setTranslation(x, y) {\n        x = x || 0;\n        y = y || 0;\n\n        this.element.setAttribute('transform', 'translate(' + x + ', ' + y + ')');\n    }\n\n    /**\n     * Gets the mean of a list of numbers\n     *\n     * @param {Array} numbers\n     *\n     * @returns {Number} Mean\n     */\n    getMean(...numbers) {\n        let mean = 0;\n\n        for(let number of numbers) {\n            mean += number;\n        }\n\n        mean /= numbers.length;\n\n        return mean;\n    }\n\n    /**\n     * Interpolates between 2 values\n     *\n     * @param {Number} value1\n     * @param {Number} value2\n     * @param {Number} amount\n     */\n    static lerp(value1, value2, amount) {\n        amount = amount < 0 ? 0 : amount;\n        amount = amount > 1 ? 1 : amount;\n        \n        return value1 + (value2 - value1) * amount;\n    }\n\n    /**\n     * Sets the percentage and colour of a slice\n     *\n     * @param {String} name\n     * @param {Number} duration\n     * @param {Object} slice\n     */\n    setSlice(name, duration, slice) {\n        if(!this.model[name]) {\n            this.model[name] = {\n                percent: 0,\n                value: 0,\n                color: 'transparent'\n            };\n        }\n\n        let startPercent = this.model[name].percent;\n        let startColor = this.model[name].color || slice.color;\n        let startValue = this.model[name].value || slice.value;\n\n        this.model[name].percent = startPercent;\n        this.model[name].color = startColor;\n        this.model[name].value = startValue;\n\n        duration = duration || 0;\n\n        let amount = 0;\n        let time = Date.now();    \n\n        if(duration <= 0) {\n            this.model[name].percent = slice.percent;\n            this.model[name].color = slice.color;\n            this.model[name].value = slice.value;\n            \n            _.replace(this.svg, this.renderSlices());\n            return;\n        }\n\n        let tick = () => {\n            let delta = (Date.now() - time) / 1000;\n            amount += delta / duration;\n\n            time = Date.now();\n\n            this.model[name].percent = PieChart.lerp(startPercent, slice.percent, amount);\n            this.model[name].value = PieChart.lerp(startValue, slice.value, amount);\n\n            _.replace(this.svg, this.renderSlices());\n            _.replace(this.labels, this.renderLabels());\n\n            if(amount >= 1) { return; }\n\n            requestAnimationFrame(() => { tick(); });\n        };\n\n        requestAnimationFrame(() => { tick(); });\n    }\n   \n    /**\n     * Renders the slices\n     *\n     * @returns {Array} Slices\n     */\n    renderSlices() {\n        let percent = 0;\n        let sliceIndex = 0;\n\n        return _.each(this.model, (name, slice) => {\n            let start = this.getCoordinate(percent);\n\n            percent += slice.percent;\n            \n            let end = this.getCoordinate(percent);\n\n            let largeArc = slice.percent > 0.5 ? 1 : 0;\n\n            let pathData = \n                'M ' + start.x + ' ' + start.y + ' ' + \n                'A 1 1 0 ' + largeArc + ' 1 ' + end.x + ' ' + end.y + \n                'L 0 0';\n\n            sliceIndex++;\n\n            return _.path({d: pathData, fill: slice.color, 'data-percent': slice.percent, 'data-name': name});\n        });\n    }\n\n    /**\n     * Renders the labels\n     *\n     * @returns {Array} Array of labels\n     */\n    renderLabels() {\n        return _.each(this.model, (name, slice) => {\n            if(!slice.label) { return; }\n\n            return _.label({class: 'widget widget--label pie-chart__label', style: 'border-left: 2em solid ' + slice.color},\n                _.if(slice.showPercentage,\n                    _.span({class: 'pie-chart__label__percent'}, Math.round(slice.percent * 100) + '%')\n                ),\n                slice.label + ' (' + Math.round(slice.value) + 'kr.)'\n            );\n        });\n    }\n\n    /**\n     * Template\n     */\n    template() {\n        return _.div({class: 'pie-chart ' + (this.className || '')},\n            this.svg = _.svg({class: 'pie-chart__svg', viewBox: '-1 -1 2 2'},\n                this.renderSlices()\n            ),\n            this.labels = _.div({class: 'pie-chart__labels'},\n                this.renderLabels()\n            )\n        );\n    }\n}\n\nmodule.exports = PieChart;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Charts/PieChart.js","'use strict';\n\nclass CoinStack extends Crisp.View {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.currentAmount = this.amount;\n        this.coinHeight = this.coinHeight || 10;\n        this.label = this.label || '';\n        this.color = this.color || '#000000';\n\n        this.fetch();\n    }\n\n    /**\n     * Transfers an amount from one stack to another\n     *\n     * @param {CoinStack} from\n     * @param {CoinStack} to\n     * @param {Number} amount\n     */\n    static transfer(from, to, amount) {\n        if(from.amount < amount) { throw new Error('The coin stack does not have enough coins to transfer ' + amount + ' coins'); }\n\n        from.amount -= amount;\n\n        setTimeout(() => {\n            to.amount += amount;\n        }, 500);\n    }\n\n    /**\n     * Gets the stack element\n     *\n     * @returns {HTMLElement} Stack element\n     */\n    get stackElement() {\n        return this.element.querySelector('.coin-stack__stack');\n    }\n\n    /**\n     * Updates the stack height\n     */\n    update() {\n        if(this.amount > this.currentAmount) {\n            this.currentAmount++;\n\n            let targetAmount = this.currentAmount;\n\n            let coin = _.div({class: 'coin-stack__coin in', style: 'bottom: ' + ((this.currentAmount - 1) * this.coinHeight) + 'px'});\n\n            setTimeout(() => {\n                this.update();\n            }, 50);\n\n            setTimeout(() => {\n                this.stackElement.setAttribute('style', this.getAmountStyle(targetAmount));\n                coin.remove();\n            }, 400);\n\n            _.append(this.stackElement, coin);\n\n        } else if(this.amount < this.currentAmount) {\n            this.currentAmount--;\n            \n            let targetAmount = this.currentAmount;\n                \n            this.stackElement.setAttribute('style', this.getAmountStyle(targetAmount));\n\n            let coin = _.div({class: 'coin-stack__coin out', style: 'bottom: ' + (this.currentAmount * this.coinHeight) + 'px'});\n\n            setTimeout(() => {\n                this.update();\n            }, 50);\n\n            setTimeout(() => {\n                coin.remove();\n            }, 400);\n\n            _.append(this.stackElement, coin);\n        }\n    }\n\n    /**\n     * Sets the coin amount\n     *\n     * @param {Number} amount\n     */\n    set amount(amount) {\n        if(amount < 0) { amount = 0; }\n\n        amount = Math.round(amount);\n\n        this._amount = amount;\n\n        this.update();\n    }\n\n    /**\n     * Gets the coin amount\n     *\n     * @returns {Number} Amount\n     */\n    get amount() {\n        return this._amount || 0;\n    }\n\n    /**\n     * Gets the amount style\n     *\n     * @param {Number} amount\n     *\n     * @returns {String} Amount style\n     */\n    getAmountStyle(amount) {\n        return 'height: calc(' + (amount || this.amount) + ' * ' + this.coinHeight + 'px);'; \n    }\n\n    /**\n     * Template\n     */\n    template() {\n        return _.div({class: 'coin-stack'},\n            _.div({class: 'coin-stack__stack', style: this.getAmountStyle()}),\n            _.div({class: 'coin-stack__label', style: 'color: ' + this.color}, this.label)\n        );\n    }\n}\n\nmodule.exports = CoinStack;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Charts/CoinStack.js","'use strict';\n\nclass Setup extends Crisp.View {\n    /**\n     * Constrcutor\n     */\n    constructor(params) {\n        super(params);\n\n        this.model = {\n            name: 'My Company Aps',\n            total: 7500,\n            capital: 5000\n        };\n            \n        this.fetch();\n    }\n   \n    /**\n     * Updates the pie chart\n     */\n    updatePieChart() {\n        if(!this.pieChart) { return; }\n        \n        this.pieChart.setSlice('account', 0.33, {\n            percent: 1 - (this.model.capital / this.model.total),\n            value: this.model.total - this.model.capital\n        });\n\n        this.pieChart.setSlice('capital', 0.33, {\n            percent: this.model.capital / this.model.total,\n            value: this.model.capital\n        });\n    }\n\n    /**\n     * Event: Change name\n     *\n     * @param {InputEvent} e\n     */\n    onChangeName(e) {\n        this.model.name = e.currentTarget.value;\n    }\n    \n    /**\n     * Event: Change capital\n     *\n     * @param {InputEvent} e\n     */\n    onChangeCapital(e) {\n        let value = parseInt(e.currentTarget.value);\n\n        if(value < 0) {\n            e.currentTarget.value = 0;\n        }\n\n        if(value > this.model.account) {\n            e.currentTarget.value = this.model.account;\n        }\n\n        this.model.capital = e.currentTarget.value;\n\n        this.updatePieChart();\n    }\n\n    /**\n     * Event: Click next\n     *\n     * @param {InputEvent} e\n     */\n    onClickNext(e) {\n        // We clear localStorage this point to make sure we start with a clean slate\n        localStorage.clear();\n\n        Game.Services.ConfigService.set('personalAccount', this.model.total - this.model.capital);\n        Game.Services.ConfigService.set('companyAccount', this.model.capital);\n        Game.Services.ConfigService.set('companyName', this.model.name);\n\n        Crisp.Router.go('/b-tax-estimation');\n    }\n\n    /**\n     * Template\n     */\n    template() {\n        return _.div({class: 'page page--setup'},\n            _.h1({class: 'page__title'}, 'Setup'),\n            _.div({class: 'page--setup__input'},\n                _.div({class: 'widget-group align-center'},\n                    _.label({class: 'widget widget--label'}, 'Company name'),\n                    _.input({class: 'widget widget--input', type: 'text', name: 'name', placeholder: 'E.g. \"My Company ApS\"', value: this.model.name})\n                        .on('input', (e) => { this.onChangeName(e); })\n                ),\n                _.div({class: 'widget-group align-center'},\n                    _.label({class: 'widget widget--label'}, 'Capital'),\n                    _.input({class: 'widget widget--input', type: 'number', min: 0, max: this.model.account, step: 1000, name: 'capital', placeholder: 'E.g. 3000', value: this.model.capital})\n                        .on('input', (e) => { this.onChangeCapital(e); })\n                )\n            ),\n            this.pieChart = new Game.Views.Charts.PieChart({\n                className: 'page--setup__pie-chart',\n                model: {\n                    account: { percent: 1 - (this.model.capital / this.model.total), label: 'Personal account', value: this.model.total - this.model.capital, color: 'green' },\n                    capital: { percent: this.model.capital / this.model.total, label: 'Capital', value: this.model.capital, color: 'blue' },\n                    total: { percent: 1, label: 'Total funds', color: 'transparent', value: this.model.total }\n                }\n            }),\n            _.button({class: 'widget widget--button align-right'}, 'Next')\n                .click((e) => { this.onClickNext(e); })\n        );\n    }\n}\n\nmodule.exports = Setup;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Pages/Setup.js","'use strict';\n\n/**\n * The B tax estimation page\n */\nclass BTaxEstimation extends Crisp.View {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.model = {\n            income: 96000,\n            btax: 0\n        };\n\n        this.fetch();\n    }\n\n    /**\n     * Event: Change income\n     *\n     * @param {InputEvent} e\n     */\n    onChangeIncome(e) {\n        let value = parseInt(e.currentTarget.value);\n\n        if(value < 0) {\n            e.currentTarget.value = 0;\n        }\n\n        this.model.income = parseInt(e.currentTarget.value);\n        this.model.btax = 0;\n        this.finalBTax.innerHTML = '';\n\n        this.updatePieChart();\n    }\n\n    /**\n     * Updates the pie chart\n     */\n    updatePieChart() {\n        if(!this.pieChart) { return; }\n        \n        this.pieChart.setSlice('btax', 0.33, {\n            percent: this.model.btax / this.model.income,\n            value: this.model.btax\n        });\n\n        this.pieChart.setSlice('income', 0.33, {\n            percent: 1 - (this.model.btax / this.model.income),\n            value: this.model.income\n        });\n    }\n    \n    /**\n     * Event: Click calculate\n     *\n     * @param {InputEvent} e\n     */\n    onClickCalculate(e) {\n        let progressBar = new Game.Views.Widgets.ProgressBar();\n        let progress = 0;\n        let max = 38;\n\n        progress += 0.8;\n        progressBar.setProgress(progress, max, 'Church tax...');\n        \n        wait(1)\n        .then(() => {\n            progress += 2.8;\n            progressBar.setProgress(progress, max, 'State tax...');\n\n            return wait(0.9);\n        })\n        .then(() => {\n            progress += 5;\n            progressBar.setProgress(progress, max, 'Health contributions...');\n\n            return wait(0.85);\n        })\n        .then(() => {\n            progress += 23.8;\n            progressBar.setProgress(progress, max, 'Municipal tax...');\n\n            return wait(1);\n        })\n        .then(() => {\n            progress += 2.8;\n            progressBar.setProgress(progress, max, 'Labour market contribution...');\n\n            return wait(0.4);\n        })\n        .then(() => {\n            progress += 2.8;\n            progressBar.setProgress(progress, max, 'ATP contribution...');\n\n            return wait(2);\n        })\n        .then(() => {\n            this.model.btax = this.model.income * 0.38;\n\n            progressBar.remove();\n\n            this.updatePieChart();\n\n            this.finalBTax.innerHTML = this.model.btax + ' / 12 = <span>' + Math.round(this.model.btax / 12) + 'kr. per month</span>';\n        });\n    }\n\n    /**\n     * Event: Click done\n     *\n     * @param {InputEvent} e\n     */\n    onClickDone(e) {\n        if(this.model.btax <= 0) { return alert('Please calculate your B tax first'); } \n\n        // Save the estimated income\n        Game.Services.ConfigService.set('estimatedIncome', this.model.income);\n\n        // Save the B tax estimate\n        Game.Services.ConfigService.set('btax', this.model.btax);\n\n        // Check if setup is complete\n        if(!Game.Services.ConfigService.set('completedSetup')) {\n            Game.Services.ConfigService.set('completedSetup', true);\n            Game.Services.TimeService.startClock();\n        }\n\n        location.hash = '/session';\n    }\n\n    /**\n     * Template\n     */\n    template() {\n        return _.div({class: 'page page--b-tax-estimation'},\n            _.h1({class: 'page__title'}, 'B tax estimation for ' + Game.Services.TimeService.currentYear),\n            _.div({class: 'page--b-tax-estimation__input'},\n                _.div({class: 'widget-group align-center'},\n                    _.label({class: 'widget widget--label'}, 'Target income for ' + Game.Services.TimeService.currentYear),\n                    _.input({class: 'widget widget--input', type: 'number', step: 1000, min: 0, value: this.model.income})\n                        .on('input', (e) => { this.onChangeIncome(e); })\n                ),\n                _.button({class: 'widget widget--button align-center'}, 'Calculate B tax')\n                    .click((e) => { this.onClickCalculate(e); })\n            ),\n            this.pieChart = new Game.Views.Charts.PieChart({\n                className: 'page--b-tax-estimation__pie-chart',\n                showPercentage: true,\n                model: {\n                    btax: { showPercentage: true, percent: this.model.btax / this.model.income, label: 'B tax', value: this.model.btax, color: 'blue' },\n                    income: { percent: 1 - (this.model.btax / this.model.income), label: 'Target income', color: 'green', value: this.model.income }\n                }\n            }),\n            this.finalBTax = _.div({class: 'page--b-tax-estimation__final'}),\n            _.button({class: 'widget widget--button align-right'}, 'Done')\n                .click((e) => { this.onClickDone(e); })\n        );\n    }\n}\n\nmodule.exports = BTaxEstimation;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Pages/BTaxEstimation.js","'use strict';\n\nclass Session extends Crisp.View {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.model = Game.Models.Player.current;\n            \n        this.stats = new Game.Views.Drawers.Stats();\n        this.notifications = new Game.Views.Drawers.Notifications();\n        this.timeline = new Game.Views.Drawers.Timeline();\n        this.coinStack = new Game.Views.Charts.CoinStack({\n            amount: Math.round(Game.Services.ConfigService.get('personalAccount', 0) / 1000)\n        });\n\n        this.fetch();\n        \n        setInterval(() => {\n            if(Game.isPaused) { return; }\n\n            this.heartbeat();\n        }, 1000);\n    }\n\n    /**\n     * Heartbeat\n     */\n    heartbeat() {\n        this.element.classList.toggle('paused', !document.hasFocus());\n        \n        if(!document.hasFocus() || Game.Services.TimeService.isPaused) { return; }\n\n        // Tick time \n        Game.Services.TimeService.tick();\n       \n        this.timeline.heartbeat();\n        this.notifications.heartbeat();\n        this.stats.heartbeat();\n\n        // Update coin stack\n        let stackAmount = Math.round(Game.Services.ConfigService.get('personalAccount', 0) / 1000);\n        \n        if(stackAmount !== this.coinStack.amount) {\n            this.coinStack.amount = stackAmount;\n        }\n\n        // Sell one unit every second\n        Game.Services.SessionService.sellUnit();\n\n        // Automatically produce units\n        Game.Services.SessionService.autoProduceUnits();\n        \n        // Update the view\n        this.update();\n    }\n\n    /**\n     * Event: Changed unit price\n     *\n     * @param {Number} price\n     */\n    onChangeUnitPrice(price) {\n        Game.Services.SessionService.setUnitPrice(price);\n\n        this.update();\n    }\n\n    /*\n     * Event: Click buy machine\n     */\n    onClickBuyMachine() {\n        Game.Services.SessionService.buyMachine();\n\n        this.update();\n    }\n    \n    /*\n     * Event: Click produce\n     */\n    onClickProduce() {\n        Game.Services.SessionService.produceUnit();\n\n        this.update();\n    }\n\n    /**\n     * Template\n     */\n    template() {\n        let year = Game.Services.TimeService.currentYear;\n        let month = Game.Services.TimeService.currentMonth;\n\n        return _.div({class: 'page page--session'},\n            _.div({class: 'page--session__user-input'},\n                _.div({class: 'widget-group'},\n                    _.div({class: 'widget widget--label'}, 'Unit price'),\n                    _.input({class: 'widget widget--input text-center', type: 'number', value: Game.Services.ConfigService.get('unitPrice', Game.DEFAULT_UNIT_PRICE)})\n                        .on('input', (e) => { this.onChangeUnitPrice(e.currentTarget.value); }),\n                    _.div({dynamicContent: true, class: 'widget widget--label text-right vat'}, (Game.Services.ConfigService.get('unitPrice', Game.DEFAULT_UNIT_PRICE) * 1.25) + ' DKK')\n                ),\n                _.div({class: 'widget-group'},\n                    _.div({dynamicContent: true, class: 'widget widget--label'}, 'Machines: ' + Game.Services.ConfigService.get('machines', 0)),\n                    _.button({class: 'widget widget--button'}, 'Buy machine (' + Game.MACHINE_PRICE + ' DKK)')\n                        .click((e) => { this.onClickBuyMachine(); }),\n                    _.div({class: 'widget widget--label text-right vat'}, (Game.MACHINE_PRICE * 1.25) + ' DKK')\n                ),\n                _.div({class: 'widget-group'},\n                    _.div({dynamicContent: true, class: 'widget widget--label'}, 'Inventory: ' + Game.Services.ConfigService.get('inventory', 0)),\n                    _.button({class: 'widget widget--button'}, 'Produce (' + Game.PRODUCTION_COST + ' DKK)')\n                        .click((e) => { this.onClickProduce(); }),\n                    _.div({class: 'widget widget--label text-right vat'}, (Game.PRODUCTION_COST * 1.25) + ' DKK')\n                ),\n                _.div({class: 'widget-group'},\n                    _.div({class: 'class: widget widget--label'}, 'Sales this year (estimated ' + Game.Services.ConfigService.get('estimatedIncome', 0).toString() + '):'),\n                    _.div({dynamicContent: true, class: 'class: widget widget--label'}, Game.Services.SessionService.getSales(year).toString())\n                ),\n                _.div({class: 'widget-group'},\n                    _.div({class: 'class: widget widget--label'}, 'Cost this year:'),\n                    _.div({dynamicContent: true, class: 'class: widget widget--label'}, Game.Services.SessionService.getCost(year).toString())\n                )\n            ),\n            this.stats.element,\n            this.notifications.element,\n            this.timeline.element,\n            this.coinStack.element\n        );\n    }\n}\n\nmodule.exports = Session;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Pages/Session.js","'use strict';\n\n/**\n * The view controller\n */\nclass ViewController {\n    /**\n     * Initialise routes\n     */\n    static init() {\n        Crisp.Router.route('/', this.index);\n        Crisp.Router.route('/b-tax-estimation', this.btax);\n        Crisp.Router.route('/session', this.session);\n    \n        Crisp.Router.init();\n    }\n\n    /**\n     * Index\n     */\n    static index() {\n        _.replace(document.body,\n            new Game.Views.Pages.Setup() \n        );\n    }\n\n    /**\n     * B tax\n     */\n    static btax() {\n        _.replace(document.body,\n            new Game.Views.Pages.BTaxEstimation() \n        );\n    }\n\n    /**\n     * Session\n     */\n    static session() {\n        _.replace(document.body,\n            new Game.Views.Pages.Session() \n        );\n    }\n}\n\nViewController.init();\n\nmodule.exports = ViewController;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Controllers/ViewController.js"],"sourceRoot":""}