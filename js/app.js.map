{"version":3,"sources":["webpack:///webpack/bootstrap b200954ceabfdfe51c6d","webpack:///./src/index.js","webpack:///./src/Style/index.scss","webpack:///./src/Services/ConfigService.js","webpack:///./src/Services/TimeService.js","webpack:///./src/Services/DebugService.js","webpack:///./src/Models/Entity.js","webpack:///./src/Models/Player.js","webpack:///./src/Models/Company.js","webpack:///./src/Models/Report.js","webpack:///./src/Models/VATRecord.js","webpack:///./src/Models/VATPayment.js","webpack:///./src/Models/FinancialRecord.js","webpack:///./src/Views/Widgets/PlayerInfo.js","webpack:///./src/Views/Widgets/DebugMenu.js","webpack:///./src/Views/Widgets/ProgressBar.js","webpack:///./src/Views/Modals/Modal.js","webpack:///./src/Views/Modals/VATReportingTool.js","webpack:///./src/Views/Drawers/Drawer.js","webpack:///./src/Views/Drawers/FinancialRecordDrawer.js","webpack:///./src/Views/Drawers/VATRecordDrawer.js","webpack:///./src/Views/Drawers/Timeline.js","webpack:///./src/Views/Drawers/Notifications.js","webpack:///./src/Views/Charts/PieChart.js","webpack:///./src/Views/Pages/Setup.js","webpack:///./src/Views/Pages/BSkatEstimation.js","webpack:///./src/Views/Pages/Session.js","webpack:///./src/Controllers/ViewController.js"],"names":["require","window","_","Crisp","Elements","Game","Services","ConfigService","TimeService","DebugService","Models","Entity","Player","Company","Report","VATRecord","VATPayment","FinancialRecord","Views","Widgets","PlayerInfo","DebugMenu","ProgressBar","Modals","Modal","VATReportingTool","Drawers","Drawer","FinancialRecordDrawer","VATRecordDrawer","Timeline","Notifications","Charts","PieChart","Pages","Setup","BSkatEstimation","Session","Controllers","ViewController","set","key","value","localStorage","setItem","JSON","stringify","e","get","parse","getItem","module","exports","HOURS_PER_SECOND","Date","prototype","reset","setHours","setMinutes","setSeconds","addHours","h","setTime","getTime","addDays","d","setDate","getDate","addMonths","m","setMonth","getMonth","getMonthName","names","getQuarter","month","prettyPrint","string","getFullYear","startClock","now","tick","time","currentTime","amount","startTime","unix","currentYear","currentMonth","currentDate","previousQuarter","quarter","currentQuarter","getQuarterFromMonth","autoReloadInterval","setAutoReload","isActive","clearInterval","setInterval","isPaused","reloadStyle","reloadScript","styleTags","document","querySelectorAll","i","length","getAttribute","indexOf","setAttribute","scriptTags","clear","location","reload","pause","play","constructor","params","structure","Object","Array","isArray","k","parseFloat","toString","seal","current","personalAccount","company","vatRecord","financialRecord","load","save","reportQuarterlyVAT","year","report","getQuarterlyReport","sales","productionCost","payments","isReported","payQuarterlyVAT","payment","fine","alert","bankBalance","isPaid","MACHINE_PRICE","name","capital","unitPrice","unitProduction","unitProductionCost","demand","inventory","machines","round","num","Math","estimatedYearlySales","estimatedYearlySalesVAT","estimatedYearlyProductionCost","estimatedYearlyProductionCostVAT","estimatedYearlyIncome","estimatedYearlyBSkat","estimatedVATPercentage","estimatedYearlyVAT","estimatedMonthlyBSkat","player","sellUnit","currentReport","produceUnit","purchaseMachine","parseInt","append","generatePayments","firstYear","firstQuarter","targetYear","targetQuarter","thisFirstQuarter","thisTargetQuarter","dueAt","updateFine","diffDays","ceil","floor","reports","generateReports","firstMonth","targetMonth","thisFirstMonth","thisTargetMonth","View","model","notifications","fetch","_render","getTimeString","timeString","update","playerInfo","isExpanded","toggle","element","querySelector","checked","notify","area","title","description","buttonLabel","onClick","btoa","clearNotification","getNotificationsString","keys","strings","notification","push","join","renderNotifications","ul","class","each","li","h4","if","button","click","hasNotifications","template","div","input","type","renderButton","label","max","message","progressBar","getAll","remove","body","setProgress","progress","modal","renderHeader","renderBody","renderFooter","close","className","replace","toLowerCase","substring","h1","renderContent","renderPreview","trim","drawer","renderToggle","position","months","bTaxIsPaid","dueReports","duePayments","checkPayments","checkPayment","paymentYear","quarters","getNotification","date","action","expiresOn","onClickNotification","heartbeat","lastDate","loop","day","do","entry","createdOn","instance","cleanExpired","percent","style","getCoordinate","x","cos","PI","y","sin","setTranslation","getMean","numbers","mean","number","lerp","value1","value2","setSlice","duration","slice","color","startPercent","startColor","startValue","svg","renderSlices","delta","labels","renderLabels","requestAnimationFrame","sliceIndex","start","end","largeArc","pathData","path","fill","showPercentage","span","viewBox","total","updatePieChart","pieChart","onChangeName","currentTarget","onChangeCapital","account","onClickNext","Router","go","placeholder","on","min","step","income","bskat","onChangeIncome","finalBSkat","innerHTML","wait","timeout","Promise","resolve","setTimeout","onClickCalculate","then","onClickDone","hash","MACHINE_DELAY","machineCounter","hasFocus","timeline","renderInputField","readOnly","disabled","renderCalculationField","result","init","route","index","session"],"mappings":"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","file":"js/app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b200954ceabfdfe51c6d","'use strict';\n\nrequire('./Style/index.scss');\n\nwindow._ = Crisp.Elements;\n\nwindow.Game = {};\n\n// -------------------\n// Services\n// -------------------\nGame.Services = {};\nGame.Services.ConfigService = require('./Services/ConfigService');\nGame.Services.TimeService = require('./Services/TimeService');\nGame.Services.DebugService = require('./Services/DebugService');\n\n// -------------------\n// Models\n// -------------------\nGame.Models = {};\nGame.Models.Entity = require('./Models/Entity');\nGame.Models.Player = require('./Models/Player');\nGame.Models.Company = require('./Models/Company');\nGame.Models.Report = require('./Models/Report');\nGame.Models.VATRecord = require('./Models/VATRecord');\nGame.Models.VATPayment = require('./Models/VATPayment');\nGame.Models.FinancialRecord = require('./Models/FinancialRecord');\n\n// -------------------\n// Views\n// -------------------\nGame.Views = {};\n\nGame.Views.Widgets = {};\nGame.Views.Widgets.PlayerInfo = require('./Views/Widgets/PlayerInfo');\nGame.Views.Widgets.DebugMenu = require('./Views/Widgets/DebugMenu');\nGame.Views.Widgets.ProgressBar = require('./Views/Widgets/ProgressBar');\n\nGame.Views.Modals = {};\nGame.Views.Modals.Modal = require('./Views/Modals/Modal');\nGame.Views.Modals.VATReportingTool = require('./Views/Modals/VATReportingTool');\n\nGame.Views.Drawers = {};\nGame.Views.Drawers.Drawer = require('./Views/Drawers/Drawer');\nGame.Views.Drawers.FinancialRecordDrawer = require('./Views/Drawers/FinancialRecordDrawer');\nGame.Views.Drawers.VATRecordDrawer = require('./Views/Drawers/VATRecordDrawer');\nGame.Views.Drawers.Timeline = require('./Views/Drawers/Timeline');\nGame.Views.Drawers.Notifications = require('./Views/Drawers/Notifications');\n\nGame.Views.Charts = {};\nGame.Views.Charts.PieChart = require('./Views/Charts/PieChart');\n\nGame.Views.Pages = {};\nGame.Views.Pages.Setup = require('./Views/Pages/Setup');\nGame.Views.Pages.BSkatEstimation = require('./Views/Pages/BSkatEstimation');\nGame.Views.Pages.Session = require('./Views/Pages/Session');\n\n// -------------------\n// Controllers\n// -------------------\nGame.Controllers = {};\nGame.Controllers.ViewController = require('./Controllers/ViewController');\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Style/index.scss\n// module id = 1\n// module chunks = 0","'use strict';\n\n/**\n * The service for user config stored in localStorage\n */\nclass ConfigService {\n    /**\n     * Sets a value\n     *\n     * @param {String} key\n     * @param {Object} value\n     */\n    static set(key, value) {\n        try {\n            localStorage.setItem(key, JSON.stringify(value));\n        } catch(e) {\n            localStorage.setItem(key, value);\n        }\n    }\n\n    /**\n     * Gets a value\n     *\n     * @param {String} key\n     *\n     * @returns {Object} Value\n     */\n    static get(key) {\n        try {\n            return JSON.parse(localStorage.getItem(key));\n\n        } catch(e) {\n            return localStorage.getItem(key);\n        }\n    }\n}\n\nmodule.exports = ConfigService;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Services/ConfigService.js","'use strict';\n\nconst HOURS_PER_SECOND = 24; \n\n/**\n * Resets hours, minutes and seconds of a date\n */\nDate.prototype.reset = function() {\n    this.setHours(0);\n    this.setMinutes(0);\n    this.setSeconds(0);\n\n    return this;\n};\n\n/**\n * Adds hours to a date\n */\nDate.prototype.addHours = function(h) {    \n    this.setTime(this.getTime() + (h*60*60*1000)); \n    return this;   \n}\n\n/**\n * Adds days to a date\n */\nDate.prototype.addDays = function(d) {\n    this.setDate(this.getDate() + d); \n    return this;   \n}\n\n/**\n * Adds months to a date\n */\nDate.prototype.addMonths = function(m) {\n    this.setMonth(this.getMonth() + m); \n    return this;   \n}\n\n/**\n * Gets the actual month\n */\nDate.prototype.getMonthName = function() {\n    const names = [\n        'January',\n        'Fabruary',\n        'March',\n        'April',\n        'May',\n        'June',\n        'July',\n        'August',\n        'September',\n        'October',\n        'November',\n        'December'\n    ];\n\n    return names[this.getMonth()];\n}\n\n/**\n * Gets quarter from a date\n */\nDate.prototype.getQuarter = function() {\n    let month = this.getMonth() + 1;\n\n    if(month <= 3) { return 1; }\n    if(month <= 6) { return 2; }\n    if(month <= 9) { return 3; }\n    return 4;\n}\n\n/**\n * Pretty prints a date\n */\nDate.prototype.prettyPrint = function() {\n    let string = this.getFullYear() + '-';\n\n    if(this.getMonth() + 1 < 10) {\n        string += '0';\n    }\n\n    string += (this.getMonth() + 1) + '-';\n    \n    if(this.getDate() < 10) {\n        string += '0';\n    }\n\n    string += this.getDate();\n\n    return string;\n}\n\n/**\n * The service for managing time\n */\nclass TimeService {\n    /**\n     * Starts the clock\n     */\n    static startClock() {\n        Game.Services.ConfigService.set('time', Date.now());\n        Game.Services.ConfigService.set('startTime', Date.now());\n    }\n\n    /**\n     * Ticks the time\n     */\n    static tick() {\n        let time = this.currentTime;\n\n        time.addHours(HOURS_PER_SECOND);\n\n        Game.Services.ConfigService.set('time', time.getTime());\n    }\n\n    /**\n     * Adds days to the current time\n     *\n     * @param {Number} amount\n     */\n    static addDays(amount) {\n        let time = this.currentTime;\n\n        time.addHours(amount * 24);\n\n        Game.Services.ConfigService.set('time', time.getTime());\n    }\n    \n    /**\n     * Gets the start time\n     */\n    static get startTime() {\n        let unix = Game.Services.ConfigService.get('startTime');\n\n        if(!unix) { return new Date(); }\n\n        return new Date(unix);\n    }\n\n    /**\n     * Gets the current time\n     */\n    static get currentTime() {\n        let unix = Game.Services.ConfigService.get('time');\n\n        if(!unix) { return new Date(); }\n\n        return new Date(unix);\n    }\n    \n    /**\n     * Gets the current year\n     */\n    static get currentYear() {\n        return this.currentTime.getFullYear();\n    }\n    \n    /**\n     * Gets the current month\n     */\n    static get currentMonth() {\n        return this.currentTime.getMonth() + 1;\n    }\n    \n    /**\n     * Gets the current date\n     */\n    static get currentDate() {\n        return this.currentTime.getDate()\n    }\n\n    /**\n     * Gets the previous quarter\n     */\n    static get previousQuarter() {\n        let quarter = this.currentQuarter - 1;\n\n        if(quarter <= 0) {\n            quarter = 4;\n        }\n\n        return quarter;\n    }\n\n    /**\n     * Gets a quarter from a month\n     *\n     * @param {Number} month\n     *\n     * @returns {Number} Quarter\n     */\n    static getQuarterFromMonth(month) {\n        if(month > 9) {\n            return 4;\n        } else if(month > 6) {\n            return 3;\n        } else if(month > 3) {\n            return 2;\n        } else {\n            return 1;\n        }\n    }\n\n    /**\n     * Gets the current quarter\n     */\n    static get currentQuarter() {\n        return this.getQuarterFromMonth(this.currentTime.getMonth() + 1)\n    }\n}\n\nmodule.exports = TimeService;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Services/TimeService.js","'use strict';\n\nlet autoReloadInterval;\n\n/**\n * A service for debugging\n */\nclass DebugService {\n    /**\n     * Sets auto reload on/off\n     *\n     * @param {Boolean} isActive\n     */\n    static setAutoReload(isActive) {\n        if(!isActive && autoReloadInterval) {\n            clearInterval(autoReloadInterval);\n        }\n\n        if(isActive && !autoReloadInterval) {\n            autoReloadInterval = setInterval(() => {\n                if(Game.isPaused) { return; }\n\n                this.reloadStyle();\n                this.reloadScript();\n            }, 500);\n        }\n    }\n\n    /**\n     * Reloads styles\n     */\n    static reloadStyle() {\n        let styleTags = document.querySelectorAll('link');\n\n        if(!styleTags) { return; }\n\n        for(let i = 0; i < styleTags.length; i++) {\n            if(styleTags[i].getAttribute('href').indexOf('css/app.css') === 0) {\n                styleTags[i].setAttribute('href', 'css/app.css?' + Date.now());\n                return;\n            }\n        }\n    }\n\n    /**\n     * Reloads scripts\n     */\n    static reloadScript() {\n        let scriptTags = document.querySelectorAll('script');\n\n        if(!scriptTags) { return; }\n\n        for(let i = 0; i < scriptTags.length; i++) {\n            if(scriptTags[i].getAttribute('src').indexOf('js/app.js') === 0) {\n                scriptTags[i].setAttribute('src', 'js/app.js?' + Date.now());\n                return;\n            }\n        }\n    }\n    \n    /**\n     * Resets the game\n     */\n    static reset() {\n        localStorage.clear();\n        \n        location.reload();\n    }\n\n    /**\n     * Pauses the game\n     */\n    static pause() {\n        Game.isPaused = true; \n    }\n\n    /**\n     * Plays the game\n     */\n    static play() {\n        Game.isPaused = false; \n    }\n}\n\nmodule.exports = DebugService;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Services/DebugService.js","'use strict';\n\n/**\n * The base model for everything\n */\nclass Entity {\n    /**\n     * Constructor\n     *\n     * @param {Object} params\n     */\n    constructor(params) {\n        this.structure();\n\n        if(params && params instanceof Object && !Array.isArray(params)) {\n            for(let k in params) {\n                switch(typeof this[k]) {\n                    case 'number':\n                        this[k] = parseFloat(params[k] || 0);\n                        break;\n\n                    case 'string':\n                        this[k] = (params[k] || '').toString();\n                        break;\n\n                    default:\n                        this[k] = params[k];\n                        break;\n                }\n            }\n        }\n\n        Object.seal(this);\n    }\n\n    /**\n     * Defines the structure of this model\n     */\n    structure() {}\n}\n\nmodule.exports = Entity;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Models/Entity.js","'use strict';\n\nlet current;\n\n/**\n * The player model\n */\nclass Player extends Game.Models.Entity {\n    /**\n     * Structure\n     */\n    structure() {\n        this.personalAccount = 50000;\n        this.company = new Game.Models.Company();\n        this.vatRecord = new Game.Models.VATRecord();\n        this.financialRecord = new Game.Models.FinancialRecord();  \n    }\n\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.company = new Game.Models.Company(this.company);\n        this.vatRecord = new Game.Models.VATRecord(this.vatRecord);\n        this.financialRecord = new Game.Models.FinancialRecord(this.financialRecord);\n    }\n\n    /**\n     * Loads the player data\n     *\n     * @returns {Player} Player\n     */\n    static load() {\n        return new Player(Game.Services.ConfigService.get('player'));\n    }\n\n    /**\n     * Get the current player\n     */\n    static get current() {\n        if(!current) {\n            current = this.load();\n        }\n\n        return current;\n    }\n\n    /**\n     * Saves the player data\n     */\n    save() {\n        Game.Services.ConfigService.set('player', this);\n    }\n    \n    /**\n     * Reports VAT quarterly\n     *\n     * @param {Number} year\n     * @param {Number} quarter\n     */\n    reportQuarterlyVAT(year, quarter) {\n        let amount = 0;\n\n        let report = this.financialRecord.getQuarterlyReport(year, quarter);     \n\n        amount += report.sales * 0.25; // Sales VAT\n        amount -= report.productionCost / 1.25 * 0.25; // Cost VAT\n\n        this.vatRecord.payments[year][quarter].isReported = true; \n        this.vatRecord.payments[year][quarter].amount = amount;\n    }\n    \n    /**\n     * Pays VAT quarterly\n     *\n     * @param {Number} year\n     * @param {Number} quarter\n     */\n    payQuarterlyVAT(year, quarter) {\n        let payment = this.vatRecord.payments[year][quarter];\n        let amount = payment.amount;\n\n        if(payment.fine > 0) {\n            amount += payment.fine;\n\n            alert('A late fee of ' + payment.fine + ' kr. has been added');\n        }\n\n        this.company.bankBalance -= amount;\n        payment.isPaid = true; \n    }\n}\n\nmodule.exports = Player;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Models/Player.js","'use strict';\n\nconst MACHINE_PRICE = 10000;\n\n/**\n * The main company model\n */\nclass Company extends Game.Models.Entity {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n    }\n\n    /**\n     * Structure\n     */\n    structure() {\n        this.name = 'My Company A/S';\n        this.capital = 20000;\n        this.bankBalance = 0;\n        this.unitPrice = 20;\n        this.unitProduction = 5000;\n        this.unitProductionCost = 10;\n        this.demand = 10000;\n\n        this.inventory = 0;\n        this.machines = 0;\n    }\n\n    /**\n     * Rounds a number by 2 decimal places\n     */\n    round(num) {\n        return Math.round(num * 100) / 100;\n    }\n\n    /**\n     * Gets the estimated yearly sales\n     */\n    get estimatedYearlySales() {\n        return this.round(this.demand * this.unitPrice);\n    }\n    \n    /**\n     * Gets the estimated yearly sales VAT\n     */\n    get estimatedYearlySalesVAT() {\n        return this.round(this.estimatedYearlySales * 0.25);\n    }\n    \n    /**\n     * Gets the estimated yearly cost\n     */\n    get estimatedYearlyProductionCost() {\n        return this.round(this.unitProduction * this.unitProductionCost);\n    }\n    \n    /**\n     * Gets the estimated yearly cost VAT\n     */\n    get estimatedYearlyProductionCostVAT() {\n        return this.round(this.estimatedYearlyProductionCost / 1.25 * 0.25);\n    }\n    \n    /**\n     * Gets the estimated income\n     */\n    get estimatedYearlyIncome() {\n        return this.round(this.estimatedYearlySales - this.estimatedYearlyProductionCost);\n    }\n\n    /**\n     * Gets the estimated yearly B skat\n     */\n    get estimatedYearlyBSkat() {\n        return this.round(this.estimatedYearlyIncome * this.estimatedVATPercentage / 100);\n    }\n    \n    /**\n     * Gets the estimated yearly VAT\n     */\n    get estimatedYearlyVAT() {\n        return this.round(this.estimatedYearlySalesVAT - this.estimatedYearlyProductionCostVAT);\n    }\n\n    /**\n     * Gets the estimated monthly B skat\n     */\n    get estimatedMonthlyBSkat() {\n        return this.round(this.estimatedYearlyBSkat / 12);\n    }\n\n    /**\n     * Gets the estimated VAT percentage\n     */\n    get estimatedVATPercentage() {\n        return 38;\n    }\n    \n    /**\n     * Saves this company\n     */\n    save() {\n        let player = Game.Models.Player.current;\n\n        player.company = this;\n\n        player.save();\n    }\n\n    /**\n     * Sells a unit\n     */\n    sellUnit() {\n        if(this.inventory < 1) { return; }\n        \n        this.inventory--;\n\n        this.bankBalance += this.unitPrice;\n        Game.Models.Player.current.financialRecord.currentReport.sales += this.unitPrice;\n    }\n\n    /**\n     * Produces a unit\n     */\n    produceUnit() {\n        if(this.bankBalance < this.unitProductionCost) {\n            return alert('You do not have enough money to produce more units');\n        }\n\n        this.inventory++;\n\n        this.bankBalance -= this.unitProductionCost;\n        Game.Models.Player.current.financialRecord.currentReport.productionCost += this.unitProductionCost;\n    }\n\n    /**\n     * Purchases a machine\n     */\n    purchaseMachine() {\n        if(this.bankBalance < MACHINE_PRICE) {\n            return alert('You do not have enough money to purchase more machines');\n        }\n\n        this.machines++;\n\n        this.bankBalance -= MACHINE_PRICE;\n        Game.Models.Player.current.financialRecord.currentReport.productionCost += MACHINE_PRICE;\n    }\n}\n\nmodule.exports = Company;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Models/Company.js","'use strict';\n\n/**\n * A monthly report\n */\nclass Report extends Game.Models.Entity {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.sales = parseInt(this.sales);\n        this.productionCost = parseInt(this.productionCost);\n    }\n\n    /**\n     * Structure\n     */\n    structure() {\n        this.sales = 0;\n        this.productionCost = 0;\n    }\n\n    /**\n     * Appends another report to this one\n     *\n     * @param {Report} report\n     */\n    append(report) {\n        this.sales += report.sales;\n        this.productionCost += report.productionCost;\n    }\n}\n\nmodule.exports = Report;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Models/Report.js","'use strict';\n\n/**\n * The record for keeping track of VAT payments\n */\nclass VATRecord extends Game.Models.Entity {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n    }\n\n    /**\n     * Structure\n     */\n    structure() {\n        this.payments = {};\n    }\n\n    /**\n     * Generates all payments\n     */\n    generatePayments() {\n        let startTime = Game.Services.TimeService.startTime;\n        let firstYear = startTime.getFullYear();\n        let firstQuarter = Game.Services.TimeService.getQuarterFromMonth(startTime.getMonth() + 1);\n        let targetYear = Game.Services.TimeService.currentYear;\n        let targetQuarter = Game.Services.TimeService.currentQuarter - 1;\n\n        for(let year = firstYear; year <= targetYear; year++) {\n            if(!this.payments[year]) {\n                this.payments[year] = {};\n            }\n\n            let thisFirstQuarter = 1;\n\n            if(year === firstYear) {\n                thisFirstQuarter = firstQuarter;\n            }\n\n            let thisTargetQuarter = 4;\n\n            if(year === targetYear) {\n                thisTargetQuarter = targetQuarter;\n            }\n\n            for(let quarter = thisFirstQuarter; quarter <= thisTargetQuarter; quarter++) {\n                if((this.payments[year][quarter] || {}) instanceof Game.Models.VATPayment === false) {\n                    this.payments[year][quarter] = new Game.Models.VATPayment(this.payments[year][quarter]);\n                }\n            }\n        }\n\n        return this.payments; \n    }\n}\n\nmodule.exports = VATRecord;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Models/VATRecord.js","'use strict';\n\n/**\n * A class for keeping track of VAT payments\n */\nclass VATPayment extends Game.Models.Entity {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        if(this.dueAt) {\n            this.dueAt = new Date(this.dueAt);\n        } else {\n            this.dueAt = Game.Services.TimeService.currentTime;\n            this.dueAt.setMonth(this.dueAt.getMonth() + 3);\n        }\n    }\n    \n    /**\n     * Structure\n     */\n    structure() {\n        this.isPaid = false;\n        this.isReported = false;\n        this.dueAt = null;\n        this.fine = 0;\n        this.amount = 0;\n    }\n\n    /**\n     * Update fine\n     */\n    updateFine() {\n        if(this.isPaid || !this.dueAt) { return; }\n\n        let diffDays = Math.ceil((Game.Services.TimeService.currentTime.getTime() - this.dueAt.getTime()) / (1000 * 3600 * 24)); \n\n        // 100 kr. per day fine\n        this.fine = Math.floor(diffDays * 100); \n    }\n}\n\nmodule.exports = VATPayment;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Models/VATPayment.js","'use strict';\n\n/**\n * A class for keeping track of reports\n */\nclass FinancialRecord extends Game.Models.Entity {\n    /**\n     * Structure\n     */\n    structure() {\n        this.reports = {};\n    }\n\n    /**\n     * Generate reports\n     */\n    generateReports() {\n        let firstYear = Game.Services.TimeService.startTime.getFullYear();\n        let firstMonth = Game.Services.TimeService.startTime.getMonth() + 1;\n        let targetYear = Game.Services.TimeService.currentYear;\n        let targetMonth = Game.Services.TimeService.currentMonth;\n\n        for(let year = firstYear; year <= targetYear; year++) {\n            if(!this.reports[year]) {\n                this.reports[year] = {};\n            }\n\n            let thisFirstMonth = 1;\n            let thisTargetMonth = 12;\n\n            if(year === firstYear) {\n                thisFirstMonth = firstMonth;\n            }\n\n            if(year === targetYear) {\n                thisTargetMonth = targetMonth;\n            }\n\n            for(let month = thisFirstMonth; month <= thisTargetMonth; month++) {\n                if(!this.reports[year][month]) {\n                    this.reports[year][month] = new Game.Models.Report();\n                }\n            }\n        }\n\n        return this.reports; \n    }\n\n    /**\n     * Gets quarterly report\n     *\n     * @param {Number} year\n     * @param {Number} quarter\n     *\n     * @returns {Object} Quarterly report\n     */\n    getQuarterlyReport(year, quarter) {\n        this.generateReports();\n\n        let firstMonth = quarter * 3 - 2;\n        let targetMonth = firstMonth + 3;\n        \n        let report = new Game.Models.Report();\n\n        for(let month = firstMonth; month < targetMonth; month++) {\n            report.append(this.reports[year][month]);\n        }\n\n        return report; \n    }\n\n    /**\n     * Gets the current report\n     */\n    get currentReport() {\n        this.generateReports();\n\n        return this.reports[Game.Services.TimeService.currentYear][Game.Services.TimeService.currentMonth];\n    }\n\n}\n\nmodule.exports = FinancialRecord;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Models/FinancialRecord.js","'use strict';\n\n/**\n * The persistent player info widget\n */\nclass PlayerInfo extends Crisp.View {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.model = Game.Models.Player.current;\n        \n        this.notifications = {\n            'company': {},\n            'personal-account': {}\n        }\n            \n        this.fetch();\n\n        setInterval(() => {\n            if(Game.isPaused) { return; }\n            \n            this._render();\n        }, 1000);\n    }\n\n    /**\n     * Gets the time string\n     */\n    getTimeString() {\n        let time = Game.Services.TimeService.currentTime;\n        let timeString = time.getFullYear() + '-';\n\n        if(time.getMonth() + 1 < 10) {\n            timeString += '0';\n        }\n\n        timeString += (time.getMonth() + 1) + '-';\n        \n        if(time.getDate() < 10) {\n            timeString += '0';\n        }\n\n        timeString += time.getDate();\n\n        return timeString;\n    }\n\n    /**\n     * Updates this view\n     */\n    static update() {\n        let playerInfo = Crisp.View.get(PlayerInfo);\n\n        if(!playerInfo) { return; }\n\n        playerInfo.fetch();\n    }\n\n    /**\n     * Gets whether or not this view is expanded\n     */\n    get isExpanded() {\n        let toggle = this.element.querySelector('.widget--player-info__toggle');\n\n        if(!toggle) { return false; }\n\n        return toggle.checked;\n    }\n\n    /**\n     * Sets a notification\n     *\n     * @param {String} area\n     * @param {String} title\n     * @param {String} description\n     * @param {String} buttonLabel\n     * @param {Function} onClick\n     */\n    static notify(area, title, description, buttonLabel, onClick) {\n        let playerInfo = Crisp.View.get(PlayerInfo);\n\n        if(!playerInfo) { return; }\n        \n        let key = btoa(title + description);\n\n        playerInfo.notifications[area][key] = {\n            title: title, \n            description: description,\n            buttonLabel: buttonLabel,\n            onClick: onClick\n        };\n    \n        playerInfo._render();\n    }\n\n    /**\n     * Clears a notification\n     *\n     * @param {String} area\n     * @param {String} key\n     */\n    static clearNotification(area, key) {\n        let playerInfo = Crisp.View.get(PlayerInfo);\n\n        if(!playerInfo) { return; }\n        \n        delete playerInfo.notifications[area][key];\n\n        playerInfo._render();\n    }\n\n    /**\n     * Gets a notification string\n     *\n     * @param {String} area\n     *\n     * @returns {String} Notifications\n     */\n    getNotificationsString(area) {\n        if(Object.keys(this.notifications[area]).length < 1) { return ''; }\n\n        let strings = [];\n\n        for(let key in  this.notifications[area]) {\n            let notification = this.notifications[area][key];\n                \n            strings.push(notification.title + '\\n' + notification.description);\n        }\n\n        return strings.join('\\n\\n');\n    }\n    \n    /**\n     * Renders notifications\n     *\n     * @param {String} area\n     *\n     * @returns {HTMLElement} Notifications\n     */\n    renderNotifications(area) {\n        return _.ul({class: 'widget--player-info__area__notifications'},\n            _.each(this.notifications[area], (key, notification) => {\n                return _.li(\n                    _.h4(notification.title),\n                    _.if(notification.description,\n                        notification.description\n                    ),\n                    _.if(notification.onClick,\n                        _.button({class: 'widget widget--button'}, notification.buttonLabel)\n                            .click(() => { notification.onClick(key); })\n                    )\n                );\n            })    \n        );\n    }\n\n    /**\n     * Checks if an area has any notifications\n     *\n     * @param {String} area\n     *\n     * @param {Boolean} Has notifications\n     */\n    hasNotifications(area) {\n        return Object.keys(this.notifications[area]).length > 0;\n    }\n\n    /**\n     * Template\n     */\n    template() {\n        return _.div({class: 'widget widget--player-info'},\n            _.input({type: 'checkbox', class: 'widget widget--player-info__toggle', checked: this.isExpanded}),\n            _.div({class: 'widget--player-info__area company'},\n                _.h4({class: 'widget--player-info__area__heading'}, 'Company'),\n                _.div({class: 'widget--player-info__area__icon' + (this.hasNotifications('company') ? ' notification' : '')}, '🏭'),\n                _.div({class: 'widget--player-info__area__preview'}, this.model.company.name + ': ' + this.model.company.bankBalance + ' kr.'),\n                _.div({class: 'widget--player-info__area__data'},\n                    'Name: ' + this.model.company.name,\n                    '<br>',\n                    'Bank balance: ' + this.model.company.bankBalance + ' kr.',\n                    this.renderNotifications('company')\n                )\n            ),\n            _.div({class: 'widget--player-info__area personal-account'},\n                _.h4({class: 'widget--player-info__area__heading'}, 'Personal account'),\n                _.div({class: 'widget--player-info__area__icon' + (this.hasNotifications('personal-account') ? ' notification' : '')}, '💰'),\n                _.div({class: 'widget--player-info__area__preview'}, this.model.personalAccount + ' kr.'),\n                _.div({class: 'widget--player-info__area__data'},\n                    'Balance: ' + this.model.personalAccount + ' kr.',\n                    this.renderNotifications('personal-account')\n                )\n            )\n        );\n    }\n}\n\nmodule.exports = PlayerInfo;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Widgets/PlayerInfo.js","'use strict';\n\nclass DebugMenu extends Crisp.View {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n\n    /**\n     * Renders a button\n     *\n     * @param {String} label\n     * @param {Function} onClick\n     */\n    renderButton(label, onClick) {\n        return _.button({class: 'widget widget--button widget--debug-menu__button'}, label)\n            .click(() => { onClick(); });\n    }\n\n    /**\n     * Template\n     */\n    template() {\n        return _.div({class: 'widget widget--debug-menu'},\n            _.input({type: 'checkbox', class: 'widget--debug-menu__toggle'}),\n            this.renderButton('Reset', Game.Services.DebugService.reset),\n            this.renderButton('Pause', Game.Services.DebugService.pause),\n            this.renderButton('Play', Game.Services.DebugService.play),\n            this.renderButton('Skip 30 days', () => { Game.Services.TimeService.addDays(30); })\n        );\n    }\n}\n\nmodule.exports = DebugMenu;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Widgets/DebugMenu.js","'use strict';\n\n/**\n * A progress bar\n */\nclass ProgressBar extends Crisp.View {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.max = this.max || 100;\n        this.value = this.value || 0;\n        this.message = '';\n\n        this.fetch();\n\n        for(let progressBar of Crisp.View.getAll(ProgressBar)) {\n            if(progressBar !== this) {\n                progressBar.remove();\n            }\n        }\n\n        _.append(document.body, this.element);\n    }\n\n    /**\n     * Sets the progress\n     *\n     * @param {Number} value\n     * @param {Number} max\n     * @param {String} message\n     */\n    setProgress(value, max, message) {\n        this.value = value;\n        this.max = max;\n\n        if(message) {\n            this.message += '<br>' + message;\n        }\n\n        this._render();\n    }\n\n    /**\n     * Template\n     */\n    template() {\n        return _.div({class: 'widget widget--progress-bar'},\n            _.progress({class: 'widget--progress-bar__progress', value: this.value, max: this.max}),\n            _.if(this.message,\n                _.div({class: 'widget--progress-bar__message'},\n                    this.message\n                )\n            )\n        );\n    }\n}\n\nmodule.exports = ProgressBar;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Widgets/ProgressBar.js","'use strict';\n\n/**\n * A modal\n */\nclass Modal extends Crisp.View {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n\n        for(let modal of Crisp.View.getAll(Modal)) {\n            if(modal === this) { continue; }\n            \n            modal.remove();\n        }\n\n        _.append(document.body, this);\n    }\n\n    /**\n     * Renders the header\n     */\n    renderHeader() {}\n\n    /**\n     * Renders the body\n     */\n    renderBody() {}\n\n    /**\n     * Renders the footer\n     */\n    renderFooter() {}\n\n    /**\n     * Closes this modal\n     */\n    close() {\n        this.remove();\n    }\n\n    /**\n     * Gets the class name\n     */\n    get className() {\n        return this.name.replace(/([A-Z])/g, '-$1').toLowerCase().substring(1);\n    }\n\n    /**\n     * Template\n     */\n    template() {\n        return _.div({class: 'modal modal--' + this.className},\n            _.div({class: 'modal__dialog'},\n                _.button({class: 'modal__close widget widget--button'})\n                    .click(() => {\n                        this.close();\n                    }),\n                _.div({class: 'modal__header'},\n                    this.renderHeader()\n                ),\n                _.div({class: 'modal__body'},\n                    this.renderBody(),\n                ),\n                _.div({class: 'modal__footer'},\n                    this.renderFooter()  \n                )\n            )\n        );\n    }\n}\n\nmodule.exports = Modal;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Modals/Modal.js","'use strict';\n\n/**\n * The VAT reporting tool\n */\nclass VATReportingTool extends Game.Views.Modals.Modal {\n    /**\n     * Gets the class name\n     */\n    get className() {\n        return 'vat-reporting-tool';\n    }\n\n    /**\n     * Gets the model\n     */\n    get model() {\n        return Game.Models.Player.current.vatRecord.payments[this.year][this.quarter];\n    }\n\n    /**\n     * Gets the quarterly report\n     */\n    getQuarterlyReport() {\n        return Game.Models.Player.current.financialRecord.getQuarterlyReport(this.year, this.quarter);\n    }\n\n    /**\n     * Renders the header\n     */\n    renderHeader() {\n        return _.h1('Report VAT for ' + this.year + ' Q' + this.quarter);\n    }\n\n    /**\n     * Renders the body\n     */\n    renderBody() {\n        return _.div({class: this.className + '__calculation'},\n             \n        );\n    }\n}\n\nmodule.exports = VATReportingTool;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Modals/VATReportingTool.js","'use strict';\n\n/**\n * A drawer for information that should be tucked away\n */\nclass Drawer extends Crisp.View {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.model = this.model || {};\n\n        this.fetch();\n    }\n    \n    /**\n     * Gets whether or not this view is expanded\n     */\n    get isExpanded() {\n        let toggle = this.element.querySelector('.drawer__toggle');\n\n        if(!toggle) { return false; }\n\n        return toggle.checked;\n    }\n\n    /**\n     * Renders the content of the drawer\n     */\n    renderContent() {}\n    \n    /**\n     * Renders the preview of the drawer\n     */\n    renderPreview() {\n        return _.div({class: 'drawer__preview'},\n            _.label({class: 'drawer__preview__label'},\n                this.name\n                    .replace('Drawer', '')\n                    .replace(/([A-Z])/g, ' $1')\n                    .trim()\n            )\n        );\n    }\n\n    /**\n     * Updates this drawer (static)\n     */\n    static update() {\n        let drawer = Crisp.View.get(this);\n\n        if(!drawer) { return; }\n\n        drawer.update();\n    }\n\n    /**\n     * Renders the toggle\n     */\n    renderToggle() {\n        return _.input({type: 'checkbox', class: 'drawer__toggle', checked: this.isExpanded});\n    }\n\n    /**\n     * Template\n     */\n    template() {\n        return _.div({class: 'drawer drawer-' + this.name.replace('Drawer', '').replace(/([A-Z])/g, '-$1').trim().toLowerCase()},\n            this.renderToggle(),\n            this.renderPreview(),\n            this.renderContent()\n        );\n    }\n}\n\nmodule.exports = Drawer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Drawers/Drawer.js","'use strict';\n\n/**\n * A drawer for the financial record and paying B tax\n */\nclass FinancialRecordDrawer extends Game.Views.Drawers.Drawer {\n    /**\n     * Gets the drawer position\n     */\n    get position() {\n        return 'bottom';\n    }\n    \n    /**\n     * Renders this drawer\n     */\n    renderContent() {\n        return _.div({class: 'drawer__content'},\n            _.each(Game.Models.Player.current.financialRecord.reports, (year, months) => {\n                return [\n                    _.h4(year),\n                    _.each(months, (month, report) => {\n                        if(report.bTaxIsPaid) { return; }\n\n                        return _.button({class: 'widget widget--button'}, month);\n                    })\n                ];\n            })\n        );\n    }\n}\n\nmodule.exports = FinancialRecordDrawer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Drawers/FinancialRecordDrawer.js","'use strict';\n\n/**\n * The drawer for VAT reminders and calculations\n */\nclass VATRecordDrawer extends Game.Views.Drawers.Drawer {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        params = params || {};\n        \n        params.dueReports = [];\n        params.duePayments = [];\n\n        params.model = Game.Models.Player.current.vatRecord;\n        \n        super(params);\n    }\n\n    /**\n     * Gets the drawer position\n     */\n    get position() {\n        return 'bottom';\n    }\n\n    /**\n     * Renders the preview of this drawer\n     */\n    renderPreview() {\n        return _.div({class: 'drawer__preview'},\n            _.label({class: 'drawer__preview__label'},\n                'VAT Record'\n            ),\n            _.if(this.dueReports.length > 0 || this.duePayments.length > 0, \n                _.div({class: 'drawer__preview__notification'}, this.dueReports.length + this.duePayments.length)\n            )\n        );\n    }\n\n    /**\n     * Updates this drawer\n     */\n    update() { \n        this.model.generatePayments();\n\n        this.checkPayments();\n\n        this.fetch();\n    }\n\n    /**\n     * Checks a payment for any due dates\n     *\n     * @param {Number} year\n     * @param {Number} quarter\n     * @param {VATPayment} payment\n     */\n    checkPayment(year, quarter, payment) {\n    }\n       \n    /**\n     * Checks all payments\n     */\n    checkPayments() {\n        this.duePayments = [];\n\n        let previousQuarter = Game.Services.TimeService.previousQuarter;\n        let currentYear = Game.Services.TimeService.currentYear;\n        \n        for(let year in this.model.payments) {\n            let paymentYear = this.model.payments[year];\n        \n            for(let quarter in paymentYear) {\n                if(\n                    (quarter <= previousQuarter && year == currentYear) ||\n                    year < currentYear\n                ) {\n                    let payment = paymentYear[quarter];\n\n                    payment.updateFine();\n\n                    if(!payment.isReported || !payment.isPaid) {\n                        this.duePayments.push(payment);\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * Renders this drawer\n     */\n    renderContent() {\n        return _.div({class: 'drawer__content'},\n            _.each(this.model.payments, (year, quarters) => {\n                return [\n                    _.h4(year),\n                    _.each(quarters, (quarter, payment) => {\n                        if(payment.isPaid || !payment.dueAt) { return; }\n\n                        return _.button({class: 'widget widget--button'}, quarter)\n                            .click(() => {\n                                if(!payment.isReported) {\n                                    new Game.Views.Modals.VATReportingTool({\n                                        year: year,\n                                        quarter: quarter\n                                    });\n\n                                } else {\n                                    Game.Models.Player.current.payQuarterlyVAT(year, quarter);\n\n                                }\n                            });\n                    })\n                ]\n            })\n        );\n    }\n}\n\nmodule.exports = VATRecordDrawer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Drawers/VATRecordDrawer.js","'use strict'\n\n/**\n * The pervasive timeline\n */\nclass Timeline extends Game.Views.Drawers.Drawer {\n    /**\n     * Gets the notification for a date\n     *\n     * @param {Date} date\n     *\n     * @returns {Object} Notification\n     */\n    getNotification(date) {\n        // Pay VAT due date\n        if(\n            date.getDate() === 1 && // The first day of...\n            (\n                date.getMonth() === 2 || // ...march or...\n                date.getMonth() === 5 || // ...june or...\n                date.getMonth() === 8 || // ...september or...\n                date.getMonth() === 11   // ...december\n            )\n        ) {\n            return {\n                type: 'alert',\n                title: 'VAT payment due',\n                message: 'VAT payment was due on ' + date.prettyPrint() + ', but was not paid',\n                action: {\n                    label: 'Pay VAT',\n                    onClick: () => {}\n                }\n            };\n        }\n        \n        // Able to pay VAT\n        if(\n            date.getDate() === 24 && // The 24th day of...\n            (\n                date.getMonth() === 1 || // ...february or...\n                date.getMonth() === 4 || // ...may or...\n                date.getMonth() === 7 || // ...august or...\n                date.getMonth() === 10   // ...november\n            )\n        ) {\n            let expiresOn = new Date(date).addMonths(1);\n            expiresOn.setDate(1); \n\n            return {\n                type: 'warning',\n                title: 'VAT payment available',\n                message: 'VAT payment can be made, and is due on ' + expiresOn.prettyPrint(),\n                expiresOn: expiresOn,\n                action: {\n                    label: 'Pay VAT',\n                    onClick: () => {}\n                }\n            };\n        }\n\n        // Report VAT\n        if(\n            date.getDate() === 4 && // The first day of...\n            (\n                date.getMonth() === 0 || // ...january or...\n                date.getMonth() === 3 || // ...april or...\n                date.getMonth() === 6 || // ...july or...\n                date.getMonth() === 9    // ...october\n            )\n        ) {\n            let expiresOn = new Date(date).addMonths(1); \n            expiresOn.setDate(24);\n\n            return {\n                type: 'warning',\n                title: 'VAT report',\n                message: 'VAT can be reported, and payment can be made starting ' + expiresOn.prettyPrint(),\n                expiresOn: expiresOn,\n                action: {\n                    label: 'Report VAT',\n                    onClick: () => {}\n                }\n            };\n        }\n\n        // Able to pay B-skat\n        if(date.getDate() === 1) {\n            let expiresOn = new Date(date);\n            expiresOn.setDate(22);\n            \n            return {\n                type: 'warning',\n                title: 'B-skat payment available',\n                message: 'B-skat payment can be made, and is due on ' + expiresOn.prettyPrint(),\n                expiresOn: expiresOn,\n                action: {\n                    label: 'Pay B-skat',\n                    onClick: () => {}\n                }\n            };\n        }\n        \n        // B-skat payment due\n        if(date.getDate() === 22) {\n            return {\n                type: 'alert',\n                title: 'B-skat payment due',\n                message: 'B-skat payment was due on ' + date.prettyPrint() + ', but was not paid',\n                action: {\n                    label: 'Pay B-skat',\n                    onClick: () => {}\n                }\n            };\n        }\n    }\n\n    /**\n     * Event: Click notification\n     *\n     * @param {Object} notification\n     */\n    onClickNotification(notification) {\n        alert(notification.message);\n    }\n\n    /**\n     * Heartbeat\n     */\n    heartbeat() {\n        let currentDate = Game.Services.TimeService.currentDate;\n        \n        if(this.lastDate !== currentDate) {\n            this._render();  \n        }\n        \n        this.lastDate = currentDate; \n    }\n\n    /**\n     * Renders the toggle\n     */\n    renderToggle() {\n        return null;\n    }\n\n    /**\n     * Renders the preview\n     */\n    renderPreview() {\n        let date = Game.Services.TimeService.currentTime;\n\n        return _.div({class: 'drawer__preview drawer--timeline__scroller'},\n            _.div({class: 'drawer--timeline__scroller__year'},\n                date.getFullYear()\n            ),\n            _.div({class: 'drawer--timeline__scroller__month'},\n                date.getMonthName()\n            ),\n            _.div({class: 'drawer--timeline__scroller__days'},\n                _.loop(30, (day) => {\n                    let currentDate = new Date(date);\n\n                    currentDate.addDays(day);\n                    currentDate.reset();\n\n                    let notification = this.getNotification(currentDate);\n                   \n                    if(notification && day === 0) {\n                        Game.Views.Drawers.Notifications.set(notification);\n                    }\n\n                    return _.div({class: 'drawer--timeline__scroller__day ' + (currentDate.getDate() % 2 === 0 ? 'even' : 'odd')},\n                        _.if(currentDate.getDate() === 1 && day > 0,\n                            _.div({class: 'drawer--timeline__scroller__day__month'}, currentDate.getMonthName())\n                        ),\n                        _.div({class: 'drawer--timeline__scroller__day__number', 'data-number': currentDate.getDate()},\n                            currentDate.getDate(),\n                        ),\n                        _.do(() => { \n                            if(!notification) { return; }\n\n                            return _.div({class: 'drawer--timeline__scroller__day__notification ' + (notification.type || '')}, notification.title);\n                        })\n                    );\n                })\n            )\n        );\n    }\n\n    /**\n     * Renders the main content\n     */\n    renderContent() {\n        return _.div({class: 'drawer__content drawer--timeline__days'},\n\n        );\n    }\n}\n\nmodule.exports = Timeline;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Drawers/Timeline.js","'use strict';\n\n/**\n * Notification drawer\n */\nclass Notifications extends Game.Views.Drawers.Drawer {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.model = Game.Services.ConfigService.get('notifications') || {};\n\n        for(let key in this.model) {\n            let entry = this.model[key];\n\n            if(entry.createdOn) {\n                entry.createdOn = new Date(entry.createdOn);\n            }\n            \n            if(entry.expiresOn) {\n                entry.expiresOn = new Date(entry.expiresOn);\n            }\n        }\n    }\n\n    /**\n     * Sets a notification\n     *\n     * @param {Object} notification\n     */\n    static set(notification) {\n        let instance = Crisp.View.get(Notifications);\n\n        if(!instance) { return; }\n\n        notification.createdOn = Game.Services.TimeService.currentTime;\n\n        let key = notification.createdOn.getTime().toString();\n\n        instance.model[key] = notification;\n\n        Game.Services.ConfigService.set('notifications', instance.model);\n\n        instance.fetch();\n    }\n\n    /**\n     * Cleans up expired notifications\n     */\n    cleanExpired() {\n        let date = Game.Services.TimeService.currentTime;\n\n        for(let key in this.model) {\n            let entry = this.model[key];\n\n            if(entry.expiresOn && entry.expiresOn.getTime() <= date.getTime()) {\n                delete this.model[key];\n            }\n        }\n    }\n\n    /**\n     * Heartbeat\n     */\n    heartbeat() {\n        this.cleanExpired();\n        this.fetch();\n    }\n\n    /**\n     * Renders the preview\n     */\n    renderPreview() {\n        let currentDate = Game.Services.TimeService.currentTime;\n\n        return _.div({class: 'drawer__preview drawer--notifications__entries'},\n            _.each(this.model, (key, notification) => {\n                return _.div({class: 'drawer--notifications__entry ' + (notification.type || '')},\n                    _.do(() => {\n                        if(!notification.expiresOn) { return; }\n\n                        let percent = ((currentDate.getTime() - notification.createdOn.getTime()) / (notification.expiresOn.getTime() - notification.createdOn.getTime())) * 100;\n\n                        if(percent >= 100) { percent = 100; }\n\n                        return _.div({class: 'drawer--notifications__entry__progress', style: 'width: ' + percent + '%'});\n                    }),\n                    _.if(notification.title,\n                        _.div({class: 'drawer--notifications__entry__title'}, notification.title)\n                    ),\n                    _.if(notification.message,\n                        _.div({class: 'drawer--notifications__entry__message'}, notification.message)\n                    ),\n                    _.do(() => {\n                        if(!notification.action) { return; }\n\n                        return _.button({class: 'widget widget--button ' + (notification.type || '')}, notification.action.label)\n                            .click(() => { notification.action.onClick(); })\n                    })\n                );\n            })\n        );\n    }\n\n    /**\n     * Renders the toggle\n     */\n    renderToggle() {\n        return null;\n    }\n}\n\nmodule.exports = Notifications;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Drawers/Notifications.js","'use strict';\n\n/**\n * A flexible pie chart\n */\nclass PieChart extends Crisp.View {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.model = this.model || {};\n\n        this.fetch();\n    }\n\n    /**\n     * Gets a coordinate based on percent\n     *\n     * @param {Number} percent\n     *\n     * @param {Object} Coordinate\n     */\n    getCoordinate(percent) {\n        return {\n            x: Math.cos(2 * Math.PI * percent),\n            y: Math.sin(2 * Math.PI * percent)\n        };\n    }\n\n    /**\n     * Sets translation\n     *\n     * @param {Number} x\n     * @param {Number} y\n     */\n    setTranslation(x, y) {\n        x = x || 0;\n        y = y || 0;\n\n        this.element.setAttribute('transform', 'translate(' + x + ', ' + y + ')');\n    }\n\n    /**\n     * Gets the mean of a list of numbers\n     *\n     * @param {Array} numbers\n     *\n     * @returns {Number} Mean\n     */\n    getMean(...numbers) {\n        let mean = 0;\n\n        for(let number of numbers) {\n            mean += number;\n        }\n\n        mean /= numbers.length;\n\n        return mean;\n    }\n\n    /**\n     * Interpolates between 2 values\n     *\n     * @param {Number} value1\n     * @param {Number} value2\n     * @param {Number} amount\n     */\n    static lerp(value1, value2, amount) {\n        amount = amount < 0 ? 0 : amount;\n        amount = amount > 1 ? 1 : amount;\n        \n        return value1 + (value2 - value1) * amount;\n    }\n\n    /**\n     * Sets the percentage and colour of a slice\n     *\n     * @param {String} name\n     * @param {Number} duration\n     * @param {Object} slice\n     */\n    setSlice(name, duration, slice) {\n        if(!this.model[name]) {\n            this.model[name] = {\n                percent: 0,\n                value: 0,\n                color: 'transparent'\n            };\n        }\n\n        let startPercent = this.model[name].percent;\n        let startColor = this.model[name].color || slice.color;\n        let startValue = this.model[name].value || slice.value;\n\n        this.model[name].percent = startPercent;\n        this.model[name].color = startColor;\n        this.model[name].value = startValue;\n\n        duration = duration || 0;\n\n        let amount = 0;\n        let time = Date.now();    \n\n        if(duration <= 0) {\n            this.model[name].percent = slice.percent;\n            this.model[name].color = slice.color;\n            this.model[name].value = slice.value;\n            \n            _.replace(this.svg, this.renderSlices());\n            return;\n        }\n\n        let tick = () => {\n            let delta = (Date.now() - time) / 1000;\n            amount += delta / duration;\n\n            time = Date.now();\n\n            this.model[name].percent = PieChart.lerp(startPercent, slice.percent, amount);\n            this.model[name].value = PieChart.lerp(startValue, slice.value, amount);\n\n            _.replace(this.svg, this.renderSlices());\n            _.replace(this.labels, this.renderLabels());\n\n            if(amount >= 1) { return; }\n\n            requestAnimationFrame(() => { tick(); });\n        };\n\n        requestAnimationFrame(() => { tick(); });\n    }\n   \n    /**\n     * Renders the slices\n     *\n     * @returns {Array} Slices\n     */\n    renderSlices() {\n        let percent = 0;\n        let sliceIndex = 0;\n\n        return _.each(this.model, (name, slice) => {\n            let start = this.getCoordinate(percent);\n\n            percent += slice.percent;\n            \n            let end = this.getCoordinate(percent);\n\n            let largeArc = slice.percent > 0.5 ? 1 : 0;\n\n            let pathData = \n                'M ' + start.x + ' ' + start.y + ' ' + \n                'A 1 1 0 ' + largeArc + ' 1 ' + end.x + ' ' + end.y + \n                'L 0 0';\n\n            sliceIndex++;\n\n            return _.path({d: pathData, fill: slice.color, 'data-percent': slice.percent, 'data-name': name});\n        });\n    }\n\n    /**\n     * Renders the labels\n     *\n     * @returns {Array} Array of labels\n     */\n    renderLabels() {\n        return _.each(this.model, (name, slice) => {\n            if(!slice.label) { return; }\n\n            return _.label({class: 'widget widget--label pie-chart__label', style: 'border-left: 2em solid ' + slice.color},\n                _.if(slice.showPercentage,\n                    _.span({class: 'pie-chart__label__percent'}, Math.round(slice.percent * 100) + '%')\n                ),\n                slice.label + ' (' + Math.round(slice.value) + 'kr.)'\n            );\n        });\n    }\n\n    /**\n     * Template\n     */\n    template() {\n        return _.div({class: 'pie-chart ' + (this.className || '')},\n            this.svg = _.svg({class: 'pie-chart__svg', viewBox: '-1 -1 2 2'},\n                this.renderSlices()\n            ),\n            this.labels = _.div({class: 'pie-chart__labels'},\n                this.renderLabels()\n            )\n        );\n    }\n}\n\nmodule.exports = PieChart;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Charts/PieChart.js","'use strict';\n\nclass Setup extends Crisp.View {\n    /**\n     * Constrcutor\n     */\n    constructor(params) {\n        super(params);\n\n        this.model = {\n            name: 'My Company Aps',\n            total: 30000,\n            capital: 3000\n        };\n            \n        this.fetch();\n    }\n   \n    /**\n     * Updates the pie chart\n     */\n    updatePieChart() {\n        if(!this.pieChart) { return; }\n        \n        this.pieChart.setSlice('account', 0.33, {\n            percent: 1 - (this.model.capital / this.model.total),\n            value: this.model.total - this.model.capital\n        });\n\n        this.pieChart.setSlice('capital', 0.33, {\n            percent: this.model.capital / this.model.total,\n            value: this.model.capital\n        });\n    }\n\n    /**\n     * Event: Change name\n     *\n     * @param {InputEvent} e\n     */\n    onChangeName(e) {\n        this.model.name = e.currentTarget.value;\n    }\n    \n    /**\n     * Event: Change capital\n     *\n     * @param {InputEvent} e\n     */\n    onChangeCapital(e) {\n        let value = parseInt(e.currentTarget.value);\n\n        if(value < 0) {\n            e.currentTarget.value = 0;\n        }\n\n        if(value > this.model.account) {\n            e.currentTarget.value = this.model.account;\n        }\n\n        this.model.capital = e.currentTarget.value;\n\n        this.updatePieChart();\n    }\n\n    /**\n     * Event: Click next\n     *\n     * @param {InputEvent} e\n     */\n    onClickNext(e) {\n        Game.Services.ConfigService.set('personalAccount', this.model.total - this.model.capital);\n        Game.Services.ConfigService.set('companyAccount', this.model.capital);\n        Game.Services.ConfigService.set('companyName', this.model.name);\n\n        Crisp.Router.go('/b-skat-estimation');\n    }\n\n    /**\n     * Template\n     */\n    template() {\n        return _.div({class: 'page page--setup'},\n            _.h1({class: 'page__title'}, 'Setup'),\n            _.div({class: 'page--setup__input'},\n                _.div({class: 'widget-group align-center'},\n                    _.label({class: 'widget widget--label'}, 'Company name'),\n                    _.input({class: 'widget widget--input', type: 'text', name: 'name', placeholder: 'E.g. \"My Company ApS\"', value: this.model.name})\n                        .on('input', (e) => { this.onChangeName(e); })\n                ),\n                _.div({class: 'widget-group align-center'},\n                    _.label({class: 'widget widget--label'}, 'Capital'),\n                    _.input({class: 'widget widget--input', type: 'number', min: 0, max: this.model.account, step: 1000, name: 'capital', placeholder: 'E.g. 3000', value: this.model.capital})\n                        .on('input', (e) => { this.onChangeCapital(e); })\n                )\n            ),\n            this.pieChart = new Game.Views.Charts.PieChart({\n                className: 'page--setup__pie-chart',\n                model: {\n                    account: { percent: 1 - (this.model.capital / this.model.total), label: 'Personal account', value: this.model.total - this.model.capital, color: 'green' },\n                    capital: { percent: this.model.capital / this.model.total, label: 'Capital', value: this.model.capital, color: 'blue' },\n                    total: { percent: 1, label: 'Total funds', color: 'transparent', value: this.model.total }\n                }\n            }),\n            _.button({class: 'widget widget--button align-right'}, 'Next')\n                .click((e) => { this.onClickNext(e); })\n        );\n    }\n}\n\nmodule.exports = Setup;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Pages/Setup.js","'use strict';\n\n/**\n * The B-skat estimation page\n */\nclass BSkatEstimation extends Crisp.View {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.model = {\n            income: 96000,\n            bskat: 0\n        };\n\n        this.fetch();\n    }\n\n    /**\n     * Event: Change income\n     *\n     * @param {InputEvent} e\n     */\n    onChangeIncome(e) {\n        let value = parseInt(e.currentTarget.value);\n\n        if(value < 0) {\n            e.currentTarget.value = 0;\n        }\n\n        this.model.income = parseInt(e.currentTarget.value);\n        this.model.bskat = 0;\n        this.finalBSkat.innerHTML = '';\n\n        this.updatePieChart();\n    }\n\n    /**\n     * Updates the pie chart\n     */\n    updatePieChart() {\n        if(!this.pieChart) { return; }\n        \n        this.pieChart.setSlice('bskat', 0.33, {\n            percent: this.model.bskat / this.model.income,\n            value: this.model.bskat\n        });\n\n        this.pieChart.setSlice('income', 0.33, {\n            percent: 1 - (this.model.bskat / this.model.income),\n            value: this.model.income\n        });\n    }\n    \n    /**\n     * Wraps setTimeout in a promise\n     *\n     * @param {Number} timeout\n     *\n     * @returns {Promise} Callback\n     */\n    wait(timeout) {\n        timeout = timeout || 0;\n        timeout *= 1000;\n\n        return new Promise((resolve) => {\n            setTimeout(() => { resolve(); }, timeout);\n        });\n    }\n\n    /**\n     * Event: Click calculate\n     *\n     * @param {InputEvent} e\n     */\n    onClickCalculate(e) {\n        let progressBar = new Game.Views.Widgets.ProgressBar();\n\n        progressBar.setProgress(0, 100, 'Municipality tax...');\n\n        this.wait(1)\n        .then(() => {\n            progressBar.setProgress(20, 100, 'Labour contribution...');\n\n            return this.wait(1);\n        })\n        .then(() => {\n            progressBar.setProgress(30, 100, 'Step 3...');\n\n            return this.wait(1);\n        })\n        .then(() => {\n            progressBar.setProgress(40, 100, 'Step 4...');\n\n            return this.wait(1);\n        })\n        .then(() => {\n            progressBar.setProgress(50, 100, 'Step 5...');\n\n            return this.wait(1);\n        })\n        .then(() => {\n            progressBar.setProgress(60, 100, 'Step 6...');\n\n            return this.wait(1);\n        })\n        .then(() => {\n            progressBar.setProgress(70, 100, 'Step 7...');\n\n            return this.wait(1);\n        })\n        .then(() => {\n            progressBar.setProgress(80, 100, 'Step 8...');\n\n            return this.wait(1);\n        })\n        .then(() => {\n            progressBar.setProgress(90, 100, 'Step 9...');\n\n            return this.wait(1);\n        })\n        .then(() => {\n            progressBar.setProgress(100, 100, 'Done!');\n\n            return this.wait(1);\n        })\n        .then(() => {\n            this.model.bskat = this.model.income * 0.38;\n\n            progressBar.remove();\n\n            this.updatePieChart();\n\n            this.finalBSkat.innerHTML = this.model.bskat + ' / 12 = <span>' + Math.round(this.model.bskat / 12) + 'kr. per month</span>';\n        });\n    }\n\n    /**\n     * Event: Click done\n     *\n     * @param {InputEvent} e\n     */\n    onClickDone(e) {\n        if(this.model.bskat <= 0) { return alert('Please calculate your B-skat first'); } \n\n        location.hash = '/session';\n    }\n\n    /**\n     * Template\n     */\n    template() {\n        return _.div({class: 'page page--b-skat-estimation'},\n            _.h1({class: 'page__title'}, 'B-skat estimation'),\n            _.div({class: 'page--b-skat-estimation__input'},\n                _.div({class: 'widget-group align-center'},\n                    _.label({class: 'widget widget--label'}, 'Target income for ' + Game.Services.TimeService.currentYear),\n                    _.input({class: 'widget widget--input', type: 'number', step: 1000, min: 0, value: this.model.income})\n                        .on('input', (e) => { this.onChangeIncome(e); })\n                ),\n                _.button({class: 'widget widget--button align-center'}, 'Calculate')\n                    .click((e) => { this.onClickCalculate(e); })\n            ),\n            this.pieChart = new Game.Views.Charts.PieChart({\n                className: 'page--b-skat-estimation__pie-chart',\n                showPercentage: true,\n                model: {\n                    bskat: { showPercentage: true, percent: this.model.bskat / this.model.income, label: 'B-skat', value: this.model.bskat, color: 'blue' },\n                    income: { percent: 1 - (this.model.bskat / this.model.income), label: 'Target income', color: 'green', value: this.model.income }\n                }\n            }),\n            this.finalBSkat = _.div({class: 'page--b-skat-estimation__final'}),\n            _.button({class: 'widget widget--button align-right'}, 'Done')\n                .click((e) => { this.onClickDone(e); })\n        );\n    }\n}\n\nmodule.exports = BSkatEstimation;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Pages/BSkatEstimation.js","'use strict';\n\nconst MACHINE_DELAY = 4;\n\nlet machineCounter = 0;\n\nclass Session extends Crisp.View {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.model = Game.Models.Player.current;\n            \n        this.fetch();\n\n        setInterval(() => {\n            if(Game.isPaused) { return; }\n\n            this.heartbeat();\n        }, 1000);\n    }\n\n    /**\n     * Heartbeat\n     */\n    heartbeat() {\n        if(!document.hasFocus()) { return; }\n\n        // Tick time \n        Game.Services.TimeService.tick();\n       \n        this.timeline.heartbeat();\n        this.notifications.heartbeat();\n\n        /*\n        // Sell one unit every second\n        this.model.company.sellUnit();\n\n        // Automatically produce units\n        machineCounter++;\n        \n        if(machineCounter >= MACHINE_DELAY) {\n            for(let i = 0; i < this.model.company.machines; i++) {\n                this.model.company.produceUnit();\n            }\n\n            machineCounter = 0;\n        }\n\n        // Update the VAT record drawer\n        Game.Views.Drawers.VATRecordDrawer.update();\n\n        // Update the financial record drawer\n        Game.Views.Drawers.FinancialRecordDrawer.update();\n\n        // Render the level\n        this._render();\n        */\n\n        // Save the current state\n        this.model.save();\n    }\n\n    /**\n     * Renders an input field\n     *\n     * @param {String} key\n     * @param {String} label\n     * @param {String} description\n     * @param {Boolean} readOnly\n     *\n     * @returns {HTMLElement} Field element\n     */\n    renderInputField(key, label, description, readOnly) {\n        let type = 'text';\n\n        if(typeof this.model.company[key] === 'number') {\n            type = 'number';\n        }\n        \n        return _.div({class: 'page--level__user-input__field'},\n            _.h4({class: 'page--level__user-input__field__label'}, label || ''),\n            _.div({class: 'page--level__user-input__field__description'}, description || ''),\n            _.input({disabled: readOnly, type: type, class: 'widget widget--input', value: this.model.company[key] || ''})\n                .on('change', (e) => {\n                    if(readOnly) { return; }\n\n                    this.model.company[key] = e.currentTarget.value;\n\n                    this.model.save();\n                    Game.Views.Widgets.PlayerInfo.update();\n                    \n                    this.fetch();\n                })\n        );\n    }\n    \n    /**\n     * Renders a button\n     *\n     * @param {String} key\n     * @param {String} label\n     * @param {String} description\n     * @param {String} action\n     * @param {Function} onClick\n     *\n     * @returns {HTMLElement} Field element\n     */\n    renderButton(key, label, description, action, onClick) {\n        return _.div({class: 'page--level__user-input__field'},\n            _.h4({class: 'page--level__user-input__field__label'}, (label || '') + ': ' + this.model.company[key]),\n            _.div({class: 'page--level__user-input__field__description'}, description || ''),\n            _.button({class: 'widget widget--button'}, action)\n                .on('click', (e) => {\n                    onClick();\n                    \n                    this.model.save();\n                    Game.Views.Widgets.PlayerInfo.update();\n\n                    this.fetch();\n                })\n        );\n    }\n\n    /**\n     * Renders a calculation field\n     *\n     * @param {String} label\n     * @param {String} result\n     */\n    renderCalculationField(label, result) {\n        return _.div({class: 'page--level__calculations__field'},\n            _.h4({class: 'page--level__calculations__field__label'}, label),\n            _.div({class: 'page--level__calculations__field__result'}, result)\n        );\n    }\n\n    /**\n     * Template\n     */\n    template() {\n        return _.div({class: 'page page--level'},\n            _.div({class: 'page--level__numbers'},\n                _.div({class: 'page--level__user-input'},\n                    this.renderInputField('unitPrice', 'Unit price'),\n                    this.renderButton('machines', 'Machines', 'Price: 10000 kr.', 'Purchase', () => { this.model.company.purchaseMachine(); }),\n                    this.renderButton('inventory', 'Inventory', 'Cost: ' + this.model.company.unitProductionCost + ' kr.', 'Produce', () => { this.model.company.produceUnit(); }),\n                )/*,\n                _.div({class: 'page--level__calculations'},\n                    _.div({class: 'page--level__calculations__inner'},\n                        this.renderCalculationField('Sales', this.model.financialRecord.currentReport.sales + ' kr.'),\n                        this.renderCalculationField('Production cost', this.model.financialRecord.currentReport.productionCost + ' kr.') \n                    )\n                )*/\n            ),\n            this.notifications = new Game.Views.Drawers.Notifications(),\n            this.timeline = new Game.Views.Drawers.Timeline()\n        );\n    }\n}\n\nmodule.exports = Session;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/Pages/Session.js","'use strict';\n\n/**\n * The view controller\n */\nclass ViewController {\n    /**\n     * Initialise routes\n     */\n    static init() {\n        Crisp.Router.route('/', this.index);\n        Crisp.Router.route('/b-skat-estimation', this.bskat);\n        Crisp.Router.route('/session', this.session);\n    \n        Crisp.Router.init();\n    }\n\n    /**\n     * Index\n     */\n    static index() {\n        _.replace(document.body,\n            new Game.Views.Pages.Setup() \n        );\n    }\n\n    /**\n     * B-skat\n     */\n    static bskat() {\n        _.replace(document.body,\n            new Game.Views.Pages.BSkatEstimation() \n        );\n    }\n\n    /**\n     * Session\n     */\n    static session() {\n        _.replace(document.body,\n            new Game.Views.Pages.Session() \n        );\n    }\n}\n\nViewController.init();\n\nmodule.exports = ViewController;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Controllers/ViewController.js"],"sourceRoot":""}